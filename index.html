<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SwiftBus - Premium Ethiopian Bus Travel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1a73e8;
            --secondary: #ff6d00;
            --dark: #222;
            --light: #f8f9fa;
            --gray: #6c757d;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --chat-user: #e3f2fd;
            --chat-bot: #f5f5f5;
            --accent: #00c6ff;
            --ethiopia-green: #078930;
            --ethiopia-yellow: #fcdd09;
            --ethiopia-red: #da121a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: var(--dark);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background-color: rgba(255, 255, 255, 0.95);
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            transition: all 0.4s ease;
            backdrop-filter: blur(10px);
        }

        header.scrolled {
            background-color: rgba(255, 255, 255, 0.98);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            padding: 5px 0;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
        }

        .logo h1 {
            color: var(--primary);
            font-size: 28px;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .logo span {
            color: var(--secondary);
        }

        .nav-links {
            display: flex;
            list-style: none;
        }

        .nav-links li {
            margin-left: 25px;
            position: relative;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 5px 0;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--secondary);
            transition: width 0.3s ease;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .auth-buttons {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .btn {
            padding: 10px 22px;
            border-radius: 30px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            z-index: 1;
            border: none;
            font-size: 14px;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s ease;
            z-index: -1;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-outline {
            border: 2px solid var(--primary);
            color: var(--primary);
            background: transparent;
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(26, 115, 232, 0.3);
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            border: 2px solid var(--primary);
        }

        .btn-primary:hover {
            background: transparent;
            color: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(26, 115, 232, 0.3);
        }

        .btn-secondary {
            background: var(--secondary);
            color: white;
            border: 2px solid var(--secondary);
        }

        .btn-secondary:hover {
            background: transparent;
            color: var(--secondary);
            transform: translateY(-3px);
        }

        /* User Menu Styles */
        .user-menu {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-greeting {
            font-weight: 500;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .user-profile-btn {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 8px 16px;
            border-radius: 30px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .user-profile-btn:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }

        .dropdown-menu {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            min-width: 250px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.15);
            border-radius: 12px;
            z-index: 1001;
            margin-top: 15px;
            overflow: hidden;
            border: 1px solid rgba(0,0,0,0.1);
        }

        .dropdown-menu.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-info-header {
            padding: 20px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar-small {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
        }

        .user-avatar-small img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
        }

        .user-details {
            flex: 1;
        }

        .user-name {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 5px;
        }

        .user-role {
            font-size: 13px;
            opacity: 0.9;
            background: rgba(255,255,255,0.2);
            padding: 4px 10px;
            border-radius: 20px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            font-weight: 500;
        }

        .user-role.admin {
            background: rgba(255, 109, 0, 0.2);
        }

        .user-role.user {
            background: rgba(40, 167, 69, 0.2);
        }

        .dropdown-links {
            padding: 10px 0;
        }

        .dropdown-links a {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            color: var(--dark);
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .dropdown-links a:hover {
            background: var(--light);
            border-left-color: var(--primary);
            padding-left: 25px;
        }

        .dropdown-links a i {
            width: 20px;
            text-align: center;
            color: var(--primary);
        }

        .dropdown-links a.logout {
            color: var(--danger);
            border-top: 1px solid #eee;
            margin-top: 10px;
        }

        .dropdown-links a.logout i {
            color: var(--danger);
        }

        /* Language Selector */
        .language-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-left: 20px;
        }

        .language-btn {
            background: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
        }

        .language-btn.active {
            background: var(--primary);
            color: white;
        }

        .language-btn:hover:not(.active) {
            background: rgba(26, 115, 232, 0.1);
        }

        /* Mobile Navigation */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 24px;
            color: var(--dark);
            cursor: pointer;
            transition: transform 0.3s ease;
            padding: 5px;
        }

        .mobile-menu-btn:hover {
            background: var(--primary);
            color: white;
        }

      .mobile-nav {
    display: none;
    background: white;
    position: absolute;
    top: 100%;
    right: 10px;
    width: 280px;
    max-width: calc(100vw - 40px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
    z-index: 99;
    transform-origin: top right;
    animation: slideDown 0.4s ease forwards;
    border-radius: 15px;
    max-height: 75vh;
    overflow-y: auto;
}

        @keyframes slideDown {
            from { transform: scaleY(0); opacity: 0; }
            to { transform: scaleY(1); opacity: 1; }
        }

        .mobile-nav.active {
            display: block;
        }

       .mobile-nav-links {
    list-style: none;
    padding: 20px;
}

       .mobile-nav-links li {
    margin-bottom: 10px;
    opacity: 0;
    animation: fadeInUp 0.5s ease forwards;
}
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .mobile-nav-links li:nth-child(1) { animation-delay: 0.1s; }
        .mobile-nav-links li:nth-child(2) { animation-delay: 0.2s; }
        .mobile-nav-links li:nth-child(3) { animation-delay: 0.3s; }
        .mobile-nav-links li:nth-child(4) { animation-delay: 0.4s; }
        .mobile-nav-links li:nth-child(5) { animation-delay: 0.5s; }
        .mobile-nav-links li:nth-child(6) { animation-delay: 0.6s; }
        .mobile-nav-links li:nth-child(7) { animation-delay: 0.7s; }

        .mobile-nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            display: block;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
            transition: all 0.3s ease;
        }

        .mobile-nav-links a:hover {
            color: var(--primary);
            padding-left: 10px;
        }

        /* Mobile User Profile */
        .mobile-user-profile {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            color: white;
            text-align: center;
        }

        .mobile-user-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .mobile-user-name {
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .mobile-user-name i {
            font-size: 16px;
        }

        .mobile-user-role {
            font-size: 14px;
            background: rgba(255,255,255,0.2);
            padding: 6px 15px;
            border-radius: 20px;
            font-weight: 500;
        }

        .mobile-user-role.admin {
            background: rgba(255, 109, 0, 0.3);
        }

        .mobile-user-role.user {
            background: rgba(40, 167, 69, 0.3);
        }

        /* Mobile Language Selector */
        .mobile-language-selector {
            margin: 20px 0;
            padding: 10px;
            border-top: 1px solid #eee;
            border-bottom: 1px solid #eee;
        }

        .mobile-language-selector h4 {
            margin-bottom: 10px;
            color: var(--dark);
        }

        .mobile-language-buttons {
            display: flex;
            gap: 10px;
        }

        /* NEW HERO SECTION STYLES */
        .hero-section {
            position: relative;
            height: calc(100vh - 70px);
            background: url('swiftbus.jpg') center/cover no-repeat;
            display: flex;
            align-items: center;
            padding: 0 60px;
            margin-top: 70px;
        }

        .hero-content {
            position: relative;
            max-width: 700px;
            max-height: 600px;
            color: white;
            background: rgba(91, 96, 109, 0.511);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 0, 0, 0);
            animation: fadeInUp 0.8s ease-out;
            overflow: hidden;
        }

        .hero-title {
            font-size: 48px;
            font-weight: 800;
            line-height: 1.1;
            color: white;
            text-shadow: 0 2px 15px rgba(0, 0, 0, 0.5);
            margin-bottom: 15px;
        }

        .hero-subtitle {
            margin: 15px 0 25px;
            font-size: 16px;
            color: #f8fafc;
            text-shadow: 0 1px 8px rgba(0, 0, 0, 0.4);
        }

        /* Search Card */
        .search-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 16px;
            padding: 20px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            align-items: end;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .field label {
            display: block;
            font-size: 13px;
            color: #374151;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .field select,
        .field input {
            width: 100%;
            padding: 10px;
            border-radius: 10px;
            border: 1px solid #d1d5db;
            background: white;
            font-size: 14px;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        .field select:focus,
        .field input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
        }

        .search-btn {
            grid-column: span 3;
            padding: 14px;
            border-radius: 12px;
            border: none;
            background: linear-gradient(135deg, var(--primary) 0%, #1d4ed8 100%);
            color: white;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 15px rgba(26, 115, 232, 0.3);
        }

        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(26, 115, 232, 0.4);
        }

        .hero-stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .stat {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            border-radius: 15px;
            text-align: center;
            min-width: 120px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .stat:hover {
            transform: translateY(-10px);
            background: rgba(255, 255, 255, 0.25);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            display: block;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        /* Features Section */
        .features {
            padding: 100px 0;
            background: white;
            position: relative;
        }

        .section-title {
            text-align: center;
            margin-bottom: 70px;
        }

        .section-title h2 {
            font-size: 36px;
            color: var(--dark);
            margin-bottom: 15px;
            position: relative;
            display: inline-block;
        }

        .section-title h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: var(--secondary);
            border-radius: 2px;
        }

        .section-title p {
            color: var(--gray);
            max-width: 600px;
            margin: 0 auto;
            font-size: 18px;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
        }

        .feature-card {
            background: white;
            text-align: center;
            padding: 40px 25px;
            border-radius: 15px;
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), 
                       box-shadow 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.08);
            position: relative;
            overflow: hidden;
            z-index: 1;
            border: none;
        }

        .feature-card:hover {
            transform: translateY(-15px);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.15);
            border: none;
        }

        .feature-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent, rgba(255, 255, 255, 0.8), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .feature-card:hover::after {
            transform: translateX(100%);
        }

        .feature-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(45deg, var(--primary), var(--accent));
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            font-size: 32px;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .feature-card:hover .feature-icon {
            transform: scale(1.2) rotate(15deg);
            background: linear-gradient(45deg, var(--secondary), #ff8c00);
        }

        .feature-card h3 {
            margin-bottom: 15px;
            font-size: 22px;
            transition: all 0.3s ease;
        }

        .feature-card:hover h3 {
            color: var(--primary);
            transform: translateY(-5px);
        }

        .feature-card p {
            color: var(--gray);
            transition: all 0.3s ease;
        }

        .feature-card:hover p {
            color: var(--dark);
        }

        /* Routes Section */
        .routes-section {
            padding: 100px 0;
            background: white;
        }

        .routes-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .route-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            transition: all 0.4s ease;
            border-left: 4px solid var(--primary);
        }

        .route-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .route-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .route-origin, .route-destination {
            font-weight: 600;
            font-size: 18px;
        }

        .route-arrow {
            color: var(--secondary);
            font-size: 20px;
        }

        .route-details {
            display: flex;
            justify-content: space-between;
            color: var(--gray);
            font-size: 14px;
        }

        /* Cities Section */
        .cities-section {
            padding: 100px 0;
            background: linear-gradient(135deg, #0d2b4e 0%, #1a365d 50%, #2d3748 100%);
            color: white;
            position: relative;
        }

        .cities-container {
            position: relative;
            z-index: 1;
        }

        .cities-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .cities-header h2 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            background: linear-gradient(45deg, #fff, #fcdd09, #00c6ff);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% 200%;
            animation: gradientShift 3s ease infinite;
            font-weight: 700;
            text-shadow: none;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .cities-header p {
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto;
            opacity: 0.9;
        }

        .cities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        .city-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 25px 20px;
            border-radius: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .city-card:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .city-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, var(--primary), var(--accent));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 24px;
            transition: all 0.3s ease;
        }

        .city-card:hover .city-icon {
            transform: scale(1.1) rotate(10deg);
        }

        .city-card h3 {
            font-size: 1.2rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .city-description {
            font-size: 0.85rem;
            opacity: 0.9;
            margin-bottom: 12px;
            line-height: 1.4;
            color: rgba(255, 255, 255, 0.9);
            font-style: italic;
        }

        .city-routes {
            font-size: 0.8rem;
            opacity: 0.8;
            margin: 12px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .city-routes i {
            color: var(--ethiopia-yellow);
        }

        .city-features {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .city-feature {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            transition: all 0.3s ease;
        }

        .city-card:hover .city-feature {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        /* Enhanced Bus Companies Section */
        .companies {
            padding: 100px 0;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            position: relative;
        }

        .companies::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Q50,80 0,100 Z" fill="rgba(255,255,255,0.3)"/></svg>');
            background-size: 100% auto;
            background-repeat: no-repeat;
            background-position: top;
        }

        .companies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
            position: relative;
            z-index: 1;
        }

        /* Company card with clickable area */
        .company-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.5s ease;
            position: relative;
            cursor: pointer;
        }

        .company-card:hover {
            transform: translateY(-15px) scale(1.02);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
        }

        .company-logo {
            height: 140px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        .company-logo::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
            animation: rotate 15s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .company-logo img {
            max-height: 80px;
            max-width: 200px;
            object-fit: contain;
            position: relative;
            z-index: 1;
            filter: drop-shadow(0 5px 15px rgba(0,0,0,0.3));
        }

        .company-content {
            padding: 25px;
        }

        .company-content h3 {
            margin-bottom: 10px;
            font-size: 1.4rem;
            text-align: center;
            color: var(--dark);
            transition: color 0.3s ease;
        }

        .company-card:hover .company-content h3 {
            color: var(--primary);
        }

        .company-features {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 15px 0;
            justify-content: center;
        }

        .feature-tag {
            background: #e9ecef;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            color: var(--dark);
            transition: all 0.3s ease;
        }

        .company-card:hover .feature-tag {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }

        .company-rating {
            display: flex;
            align-items: center;
            color: #ffc107;
            margin: 10px 0;
            justify-content: center;
        }

        .book-btn {
            background: linear-gradient(45deg, var(--secondary), #ff8c00);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 30px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 15px;
            position: relative;
            overflow: hidden;
            z-index: 3;
        }

        .book-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 109, 0, 0.4);
        }

       
       

        /* Payment Methods Section */
        .payment-methods-section {
            padding: 100px 0;
            background: white;
        }

        .payment-method-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .payment-method-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(26, 115, 232, 0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .payment-method-card:hover::after {
            transform: translateX(100%);
        }

        .payment-method-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .payment-method-icon {
            width: 80px;
            height: 80px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 32px;
            transition: all 0.3s ease;
        }

        .payment-method-card:hover .payment-method-icon {
            background: var(--secondary);
            transform: scale(1.1);
        }

        /* Enhanced Chatbot Section */
        .chatbot-section {
            padding: 100px 0;
            background: linear-gradient(135deg, var(--primary) 0%, #0d47a1 100%);
            color: white;
        }

        .chatbot-content {
            display: flex;
            align-items: center;
            gap: 50px;
        }

        .chatbot-text {
            flex: 1;
        }

        .chatbot-text h2 {
            font-size: 40px;
            margin-bottom: 20px;
        }

        .chatbot-text p {
            margin-bottom: 30px;
            font-size: 18px;
        }

        .chatbot-features {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .chatbot-feature {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .chatbot-icon {
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.3s ease;
        }

        .chatbot-feature:hover .chatbot-icon {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(15deg) scale(1.1);
        }

        /* Enhanced Chatbot Styling */
        .chatbot-section {
            position: relative;
            overflow: hidden;
        }
        
        .chatbot-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="40" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="40" cy="80" r="1.5" fill="rgba(255,255,255,0.1)"/></svg>');
            animation: float 20s ease-in-out infinite;
        }

        .chatbot-content {
            position: relative;
            z-index: 1;
        }

        .chatbot-text h2 {
            background: linear-gradient(45deg, #fff, #fcdd09);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }

        .chatbot-text p {
            opacity: 0.9;
            line-height: 1.6;
        }

        .chatbot-feature {
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .chatbot-feature:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
        }

        .chatbot-icon {
            color: white;
        }

        .chatbot-feature-text h4 {
            font-size: 16px;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .chatbot-feature-text p {
            font-size: 14px;
            opacity: 0.8;
            margin: 0;
            line-height: 1.4;
        }

        .chatbot-btn {
            background: linear-gradient(45deg, var(--secondary), #ff8c00);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 20px rgba(255, 109, 0, 0.3);
        }

        .chatbot-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 109, 0, 0.4);
            background: linear-gradient(45deg, #ff8c00, var(--secondary));
        }

        .chatbot-btn i {
            font-size: 18px;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        /* Enhanced Chatbot Modal */
        .chatbot-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1100;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .chatbot-modal.active {
            display: flex;
        }

        .chatbot-container {
            width: 90%;
            max-width: 500px;
            height: 70vh;
            background: white;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .chatbot-header {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header-content {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }

        .chat-bot-avatar {
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .chat-bot-info h3 {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .chat-bot-status {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 12px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #4ade80;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .close-chatbot {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
            background: #f8f9fa;
            max-height: 400px;
        }

        .message {
            max-width: 85%;
            padding: 12px 16px;
            border-radius: 18px;
            line-height: 1.5;
            word-wrap: break-word;
            position: relative;
            animation: messageAppear 0.3s ease;
        }

        @keyframes messageAppear {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-message {
            align-self: flex-end;
            background: var(--primary);
            color: white;
            border-bottom-right-radius: 5px;
        }

        .bot-message {
            align-self: flex-end;
            background: var(--chat-bot);
            color: var(--dark);
            border-bottom-left-radius: 5px;
        }

        .message-time {
            font-size: 10px;
            opacity: 0.7;
            margin-top: 5px;
            text-align: right;
        }

        .quick-replies {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .quick-reply {
            background: rgba(26, 115, 232, 0.1);
            border: 1px solid rgba(26, 115, 232, 0.3);
            border-radius: 15px;
            padding: 6px 12px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--primary);
        }

        .quick-reply:hover {
            background: rgba(26, 115, 232, 0.2);
            transform: translateY(-2px);
        }

        .chat-input-container {
            padding: 20px;
            background: white;
            border-top: 1px solid #eee;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .chat-input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 25px;
            outline: none;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .chat-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(26, 115, 232, 0.1);
        }

        .send-btn {
            background: var(--primary);
            color: white;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            margin-left: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .send-btn:hover {
            background: #0d47a1;
            transform: scale(1.05);
        }

        .send-btn:disabled {
            background: var(--gray);
            cursor: not-allowed;
            transform: none;
        }

        /* AI Response Formatting */
        .bot-message strong {
            color: var(--primary);
            font-weight: 600;
        }

        .bot-message ul, .bot-message ol {
            margin: 8px 0;
            padding-left: 20px;
        }

        .bot-message li {
            margin: 4px 0;
        }

        /* AI Status Indicators */
        .ai-status {
            font-size: 11px;
            color: var(--gray);
            margin-top: 5px;
            font-style: italic;
        }

        .ai-status.success {
            color: var(--success);
        }

        .ai-status.fallback {
            color: var(--warning);
        }

        /* Typing indicator for modal */
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 10px 15px;
            background: var(--chat-bot);
            border-radius: 18px;
            width: fit-content;
            border-bottom-left-radius: 5px;
            margin-bottom: 10px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--gray);
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        /* Bus Detail Popup */
        .bus-detail-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1100;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .bus-detail-popup.active {
            display: flex;
        }

        .bus-detail-content {
            width: 90%;
            max-width: 700px;
            max-height: 80vh;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            animation: modalAppear 0.5s ease;
            display: flex;
            flex-direction: column;
        }

        @keyframes modalAppear {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        .bus-detail-header {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            padding: 25px;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }

        .bus-detail-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        .bus-detail-header-content {
            position: relative;
            z-index: 1;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .bus-detail-logo {
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            backdrop-filter: blur(10px);
            flex-shrink: 0;
        }

        .bus-detail-info h2 {
            font-size: 1.8rem;
            margin-bottom: 8px;
        }

        .bus-detail-info p {
            opacity: 0.9;
            font-size: 1rem;
            margin-bottom: 10px;
        }

        .close-detail-popup {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            z-index: 2;
        }

        .close-detail-popup:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        .bus-detail-body {
            padding: 25px;
            overflow-y: auto;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .bus-detail-section {
            margin-bottom: 25px;
        }

        .bus-detail-section:last-of-type {
            margin-bottom: 0;
            flex: 1;
        }

        .bus-detail-section h3 {
            font-size: 1.2rem;
            margin-bottom: 12px;
            color: var(--primary);
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 6px;
        }

        .detail-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #f0f0f0;
            flex-shrink: 0;
        }

        .detail-buttons button {
            flex: 1;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        /* Features grid in popup */
        .bus-detail-popup .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .bus-detail-popup .feature-item {
            background: #f8f9fa;
            padding: 8px 12px;
            border-radius: 8px;
            text-align: center;
            font-size: 12px;
            color: var(--dark);
            border: 1px solid #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .bus-detail-popup .feature-item i {
            color: var(--primary);
            font-size: 14px;
        }

        /* Routes list in popup */
        .bus-detail-popup .routes-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .bus-detail-popup .route-item {
            background: #e8f0fe;
            color: var(--primary);
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 13px;
            font-weight: 500;
            border: 1px solid rgba(26, 115, 232, 0.2);
        }

        /* Trip Details Styles */
        .trip-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--primary);
        }

        .trip-route {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .trip-from, .trip-to {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            font-size: 14px;
        }

        .trip-arrow {
            flex-shrink: 0;
        }

        .trip-date {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #666;
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: white;
            padding: 80px 0 20px;
            position: relative;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-column h3 {
            font-size: 20px;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 40px;
            height: 3px;
            background: var(--secondary);
            border-radius: 2px;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            color: #bbb;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .footer-links a:hover {
            color: white;
            padding-left: 5px;
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: white;
            transition: all 0.3s ease;
        }

        .social-links a:hover {
            background: var(--primary);
            transform: translateY(-5px);
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #bbb;
            font-size: 14px;
        }

        /* Back to Top Button */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0;
            visibility: hidden;
            z-index: 999;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border: none;
        }

        .back-to-top.active {
            opacity: 1;
            visibility: visible;
        }

        .back-to-top:hover {
            background: var(--secondary);
            transform: translateY(-5px);
        }

        /* Utility Classes */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error {
            color: var(--danger);
            font-size: 14px;
            margin-top: 5px;
        }

        .success {
            color: var(--success);
            font-size: 14px;
            margin-top: 5px;
        }

        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        /* Animation Classes */
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
        }

        .fade-in.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* Loading Animation */
        /* Enhanced Bus-Themed Loading Animation */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary) 0%, #0d47a1 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .loader.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loader-content {
            text-align: center;
            color: white;
        }

        .loader-bus-animation {
            position: relative;
            width: 200px;
            height: 100px;
            margin-bottom: 30px;
        }

        .loader-bus {
            width: 80px;
            height: 40px;
            background: var(--secondary);
            border-radius: 8px;
            position: absolute;
            top: 30px;
            animation: busMove 2s ease-in-out infinite;
        }

        .loader-bus::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 10px;
            width: 60px;
            height: 15px;
            background: var(--secondary);
            border-radius: 8px 8px 0 0;
        }

        .loader-bus::after {
            content: '';
            position: absolute;
            top: 35px;
            left: 15px;
            width: 12px;
            height: 12px;
            background: var(--dark);
            border-radius: 50%;
            box-shadow: 35px 0 0 var(--dark);
        }

        .loader-road {
            position: absolute;
            bottom: 20px;
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            overflow: hidden;
        }

        .loader-road::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 50px;
            height: 100%;
            background: white;
            animation: roadMove 1.5s linear infinite;
        }

        .loader-text {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 10px;
            animation: textPulse 2s ease-in-out infinite;
        }

        .loader-subtext {
            font-size: 16px;
            opacity: 0.8;
            margin-bottom: 20px;
        }

        .loader-progress {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
            position: relative;
        }

        .loader-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary), #ff8c00);
            border-radius: 2px;
            animation: progressMove 3s ease-in-out infinite;
        }

        .loader-icons {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            justify-content: center;
        }

        .loader-icon {
            width: 30px;
            height: 30px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            animation: iconBounce 1.5s ease-in-out infinite;
        }

        .loader-icon:nth-child(1) { animation-delay: 0s; }
        .loader-icon:nth-child(2) { animation-delay: 0.2s; }
        .loader-icon:nth-child(3) { animation-delay: 0.4s; }
        .loader-icon:nth-child(4) { animation-delay: 0.6s; }

        @keyframes busMove {
            0%, 100% { transform: translateX(0px); }
            50% { transform: translateX(120px); }
        }

        @keyframes roadMove {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        @keyframes textPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @keyframes progressMove {
            0% { width: 0%; }
            50% { width: 70%; }
            100% { width: 100%; }
        }

        @keyframes iconBounce {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        /* Floating Chatbot Button */
        .floating-chatbot-btn {
            position: fixed;
            bottom: 30px;
            left: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 998;
            border: none;
            text-decoration: none;
        }

        .floating-chatbot-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .floating-chatbot-btn i {
            font-size: 24px;
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .chatbot-content {
                flex-direction: column;
            }
            
            .chatbot-features {
                grid-template-columns: 1fr;
            }

            .hero-title {
                font-size: 2.8rem;
            }
            
            .cities-header h2 {
                font-size: 2.2rem;
            }
            
            .company-header-content {
                flex-direction: column;
                text-align: center;
            }

            .form-row {
                flex-direction: column;
                gap: 15px;
            }

            .detail-buttons {
                flex-direction: column;
            }
        }

        @media (max-width: 768px) {
            .nav-links, .auth-buttons {
                display: none;
            }
            
            .mobile-menu-btn {
                display: block;
            }

            /* Hero Section Mobile Fixes */
            .hero-section {
                height: auto;
                min-height: 100vh;
                padding: 20px 15px;
                justify-content: flex-start;
                padding-top: 100px;
            }

            .hero-content {
                max-width: 100%;
                padding: 25px 20px;
                margin: 0;
                margin-bottom: 30px;
            }

            .hero-title {
                font-size: 28px;
                line-height: 1.2;
                margin-bottom: 15px;
            }
            
            .hero-subtitle {
                font-size: 14px;
                margin: 15px 0 20px;
                line-height: 1.4;
            }
            
            .search-card {
                grid-template-columns: 1fr;
                gap: 15px;
                padding: 20px 15px;
            }
            
            .search-btn {
                grid-column: span 1;
                padding: 16px;
                font-size: 16px;
                margin-top: 10px;
            }
            
            .form-control {
                min-width: 100%;
                padding: 12px;
            }

            /* Hero Stats Mobile Fix - Show All Stats */
            .hero-stats {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
                margin-top: 25px;
                padding: 0 10px;
                max-width: 100%;
                overflow: visible;
            }
            
            .stat {
                min-width: auto;
                padding: 15px 10px;
                text-align: center;
                background: rgba(255, 255, 255, 0.2);
                backdrop-filter: blur(10px);
                border-radius: 12px;
            }
            
            .stat-number {
                font-size: 1.5rem;
                margin-bottom: 5px;
                display: block;
            }
            
            .stat-label {
                font-size: 0.75rem;
                line-height: 1.2;
                opacity: 0.95;
            }

            /* Cities Section Mobile */
            .cities-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 15px;
            }

            /* Companies Section Mobile */
            .companies-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            /* Chatbot Section Mobile */
            .chatbot-content {
                flex-direction: column;
                gap: 30px;
                text-align: center;
            }
            
            .chatbot-text h2 {
                font-size: 28px;
                margin-bottom: 15px;
            }
            
            .chatbot-text p {
                font-size: 16px;
                margin-bottom: 25px;
            }
            
            .chatbot-features {
                grid-template-columns: 1fr;
                gap: 15px;
                margin-bottom: 25px;
            }
            
            .chatbot-feature {
                padding: 12px;
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }
            
            .chatbot-icon {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }
            
            .chatbot-btn {
                padding: 12px 25px;
                font-size: 14px;
            }

            /* Chatbot Modal Mobile */
            .chatbot-container {
                width: 95%;
                height: 85vh;
                max-height: 600px;
                margin: 10px;
            }

            .message {
                max-width: 85%;
                font-size: 14px;
                padding: 10px 12px;
            }

            .floating-chatbot-btn {
                bottom: 20px;
                left: 20px;
                width: 50px;
                height: 50px;
                font-size: 18px;
            }

            /* Bus Detail Popup Mobile */
            .bus-detail-content {
                width: 95%;
                max-width: 95vw;
                max-height: 85vh;
                margin: 10px;
            }
            
            .bus-detail-header {
                padding: 20px 15px;
            }
            
            .bus-detail-header-content {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            
            .bus-detail-logo {
                width: 60px;
                height: 60px;
                font-size: 24px;
            }
            
            .bus-detail-info h2 {
                font-size: 1.3rem;
                margin-bottom: 6px;
            }
            
            .bus-detail-info p {
                font-size: 0.9rem;
                line-height: 1.4;
            }
            
            .bus-detail-body {
                padding: 20px 15px;
            }
            
            .bus-detail-section {
                margin-bottom: 20px;
            }
            
            .bus-detail-section h3 {
                font-size: 1.1rem;
                margin-bottom: 10px;
            }
            
            .detail-buttons {
                margin-top: 15px;
                padding-top: 15px;
                flex-direction: column;
                gap: 10px;
            }
            
            .detail-buttons button {
                width: 100%;
                padding: 14px 20px;
                font-size: 16px;
            }
            .search-btn {
                grid-column: span 1;
            }
            
            .hero-title {
                font-size: 36px;
            }
            
            .hero-subtitle {
                font-size: 16px;
            }
            
            .hero-content {
                padding: 25px;
            }
            
            .navbar nav {
                display: flex;
                flex-wrap: wrap;
                justify-content: flex-end;
            }
            
            .navbar nav a {
                margin: 5px;
                font-size: 14px;
            }

            .bus-detail-header-content {
                flex-direction: column;
                text-align: center;
            }
            
            /* Mobile user profile adjustments */
            .mobile-user-profile {
                padding: 15px;
            }
            
            .mobile-user-name {
                font-size: 16px;
            }
            
            .mobile-user-role {
                font-size: 12px;
                padding: 5px 12px;
            }

            /* Mobile menu button user display */
            .mobile-menu-btn {
                background: transparent;
                border: 2px solid var(--primary);
                color: var(--primary);
                padding: 8px 12px;
                border-radius: 25px;
                font-weight: 500;
                cursor: pointer;
                transition: all 0.3s ease;
                min-width: 120px;
            }

            .mobile-menu-btn:hover {
                background: var(--primary);
                color: white;
                transform: translateY(-2px);
            }

            .mobile-user-avatar {
                width: 24px;
                height: 24px;
                border-radius: 50%;
                background: rgba(26, 115, 232, 0.1);
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 12px;
                flex-shrink: 0;
            }

            .mobile-user-avatar img {
                width: 100%;
                height: 100%;
                border-radius: 50%;
                object-fit: cover;
            }

            /* Mobile dropdown styles */
            .dropdown-menu {
                position: fixed;
                top: auto;
                bottom: 0;
                left: 0;
                right: 0;
                width: 100%;
                max-width: 100%;
                margin: 0;
                border-radius: 20px 20px 0 0;
                max-height: 70vh;
                overflow-y: auto;
                z-index: 1002;
            }
        }

        @media (max-width: 480px) {
            .hero-title {
                font-size: 1.8rem;
            }

            .section-title h2 {
                font-size: 28px;
            }

            .cities-header h2 {
                font-size: 1.8rem;
            }

            .bus-detail-content {
                width: 95%;
                max-width: 95vw;
                max-height: 85vh;
                margin: 10px;
            }
            
            .bus-detail-header {
                padding: 20px 15px;
            }
            
            .bus-detail-header-content {
                flex-direction: column;
                text-align: center;
                gap: 20px;
            }
            
            .bus-detail-logo {
                width: 80px;
                height: 80px;
                font-size: 32px;
            }
            
            .bus-detail-info h2 {
                font-size: 1.5rem;
                margin-bottom: 8px;
            }
            
            .bus-detail-info p {
                font-size: 0.9rem;
                line-height: 1.4;
            }
            
            .bus-detail-body {
                padding: 15px;
                max-height: calc(85vh - 140px);
                overflow-y: auto;
            }
            
            .bus-detail-section {
                margin-bottom: 20px;
            }
            
            .bus-detail-section h3 {
                font-size: 1.1rem;
                margin-bottom: 10px;
            }
            
            .features-grid {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                gap: 8px;
            }
            
            .feature-item {
                padding: 8px 10px;
                font-size: 0.8rem;
                text-align: center;
            }
            
            .routes-list {
                display: flex;
                flex-direction: column;
                gap: 8px;
            }
            
            .route-item {
                padding: 10px;
                font-size: 0.85rem;
                background: #f8f9fa;
                border-radius: 8px;
            }
            
            .detail-buttons {
                margin-top: 15px;
                padding-top: 15px;
                border-top: 1px solid #eee;
            }
            
            .detail-buttons .btn {
                padding: 12px 20px;
                font-size: 0.9rem;
                width: 100%;
            }

            /* Trip Details Mobile */
            .trip-route {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            .trip-arrow {
                align-self: center;
                transform: rotate(90deg);
            }
        }
        
        /* Tablet dropdown styles */
        @media (min-width: 481px) and (max-width: 768px) {
            .dropdown-menu {
                position: absolute;
                top: 100%;
                right: 0;
                left: auto;
                bottom: auto;
                width: auto;
                min-width: 250px;
                max-width: 300px;
                margin-top: 10px;
                border-radius: 12px;
                max-height: none;
            }
        }
        
        /* Mobile Navigation Responsive Adjustments */
        @media (max-width: 768px) {
            .mobile-nav {
                left: 10px;
                right: 10px;
                max-width: calc(100% - 20px);
                max-height: 70vh;
                top: 65px;
            }
            
            .mobile-nav-links {
                padding: 15px;
            }
            
            .mobile-nav-links li {
                margin-bottom: 8px;
            }
            
            .mobile-user-profile {
                padding: 12px;
                margin-bottom: 10px;
            }
            /* Fix for when menu is open */
            body.menu-open {
                overflow: hidden;
            }
            
            .mobile-menu-btn.active {
                background: var(--primary);
                color: white;
            }
        }
    </style>
</head>
<body>
    <!-- Enhanced Bus-Themed Loading Screen -->
    <div class="loader" id="loader">
        <div class="loader-content">
            <div class="loader-bus-animation">
                <div class="loader-bus"></div>
                <div class="loader-road"></div>
            </div>
            <div class="loader-text">SwiftBus</div>
            <div class="loader-subtext">Your Journey Starts Here</div>
            <div class="loader-progress">
                <div class="loader-progress-bar"></div>
            </div>
            <div class="loader-icons">
                <div class="loader-icon"><i class="fas fa-bus"></i></div>
                <div class="loader-icon"><i class="fas fa-route"></i></div>
                <div class="loader-icon"><i class="fas fa-ticket-alt"></i></div>
                <div class="loader-icon"><i class="fas fa-map-marker-alt"></i></div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header id="header">
        <div class="container">
            <div class="header-top">
                <div class="logo">
                    <h1>Swift<span>Bus</span></h1>
                </div>
                <ul class="nav-links">
                    <li><a href="#">Home</a></li>
                    <li><a href="routes.html">Routes</a></li>
                    <li><a href="#cities">Cities</a></li>
                    <li><a href="#companies">Bus Companies</a></li>
                </ul>
                <div class="auth-buttons" id="authButtons">
                    <!-- Will be populated by JavaScript based on login status -->
                </div>
                <button class="mobile-menu-btn" aria-label="Toggle navigation">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
        
        <!-- Mobile Navigation -->
        <div class="mobile-nav">
            <ul class="mobile-nav-links" id="mobileNavLinks">
                <!-- Will be populated by JavaScript based on login status -->
            </ul>
        </div>
    </header>

    <!-- Enhanced Chatbot Modal -->
    <div class="chatbot-modal" id="chatbotModal">
        <div class="chatbot-container">
            <div class="chatbot-header">
                <div class="chat-header-content">
                    <div class="chat-bot-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="chat-bot-info">
                        <h3>SwiftBot</h3>
                        <div class="chat-bot-status">
                            <div class="status-dot"></div>
                            <span>Online  Ready to help</span>
                        </div>
                    </div>
                </div>
                <button class="close-chatbot" id="closeChatbot" aria-label="Close chatbot">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="chat-messages" id="modalChatMessages">
                <!-- Messages will be added here dynamically -->
            </div>
            
            <div class="chat-input-container">
                <input type="text" class="chat-input" id="modalChatInput" 
                       placeholder="Ask about routes, bookings, or travel info..." autocomplete="off">
                <button class="send-btn" id="modalSendBtn">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Floating Chatbot Button -->
    <button class="floating-chatbot-btn" id="floatingChatbotBtn">
        <i class="fas fa-robot"></i>
    </button>

    <!-- NEW HERO SECTION -->
    <section class="hero-section">
        <div class="hero-content">
            <h1 class="hero-title">Journey Across<br>Ethiopia</h1>
            <p class="hero-subtitle">Experience comfort and reliability on every route</p>

            <!-- Search Card -->
            <div class="search-card">
                <div class="field">
                    <label>From</label>
                    <select id="originSelect">
                        <option value="">Select city</option>
                        <option>Addis Ababa</option>
                        <option>Kombolcha</option>
                        <option>Bahirdar</option>
                        <option>Dessie</option>
                        <option>Adama</option>
                        <option>Hawasa</option>
                        <option>Arbaminch</option>
                        <option>Gonder</option>
                        <option>Mekele</option>
                        <option>Jimma</option>
                    </select>
                </div>

                <div class="field">
                    <label>To</label>
                    <select id="destinationSelect">
                        <option value="">Select city</option>
                        <option>Addis Ababa</option>
                        <option>Kombolcha</option>
                        <option>Bahirdar</option>
                        <option>Dessie</option>
                        <option>Adama</option>
                        <option>Hawasa</option>
                        <option>Arbaminch</option>
                        <option>Gonder</option>
                        <option>Mekele</option>
                        <option>Jimma</option>
                    </select>
                </div>

                <div class="field">
                    <label>Travel Date</label>
                    <input type="date" id="travelDate">
                </div>

                <button class="search-btn" id="heroSearchBtn"> Search Buses</button>
            </div>

            <!-- Stats Section -->
            <div class="hero-stats">
                <div class="stat">
                    <span class="stat-number">10</span>
                    <span class="stat-label">Cities</span>
                </div>
                <div class="stat">
                    <span class="stat-number">4</span>
                    <span class="stat-label">Bus Companies</span>
                </div>
                <div class="stat">
                    <span class="stat-number">50+</span>
                    <span class="stat-label">Routes</span>
                </div>
                <div class="stat">
                    <span class="stat-number">24/7</span>
                    <span class="stat-label">Support</span>
                </div>
            </div>
        </div>

       
    </section>

    <!-- Features Section -->
    <section class="features">
        <div class="container">
            <div class="section-title">
                <h2 id="features-title">Why Choose SwiftBus?</h2>
                <p id="features-subtitle">We provide the best bus booking experience with these amazing features</p>
            </div>
            <div class="features-grid">
                <div class="feature-card fade-in">
                    <div class="feature-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3 id="feature1-title">Quick Booking</h3>
                    <p id="feature1-desc">Book your bus tickets in just a few clicks with our user-friendly platform.</p>
                </div>
                <div class="feature-card fade-in">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3 id="feature2-title">Safe & Secure</h3>
                    <p id="feature2-desc">Your payments and personal information are protected with advanced security.</p>
                </div>
                <div class="feature-card fade-in">
                    <div class="feature-icon">
                        <i class="fas fa-headset"></i>
                    </div>
                    <h3 id="feature3-title">24/7 Support</h3>
                    <p id="feature3-desc">Our customer support team is available round the clock to assist you.</p>
                </div>
                <div class="feature-card fade-in">
                    <div class="feature-icon">
                        <i class="fas fa-tags"></i>
                    </div>
                    <h3 id="feature4-title">Best Prices</h3>
                    <p id="feature4-desc">We offer competitive prices with no hidden charges on all bus routes.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Routes Section -->
    <section class="routes-section" id="routes">
        <div class="container">
            <div class="section-title">
                <h2 id="routes-title">Popular Routes</h2>
                <p id="routes-subtitle">Explore our most popular bus routes across Ethiopia</p>
            </div>
            <div class="routes-container" id="routesContainer">
                <!-- Routes populated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Enhanced Bus Companies Section -->
    <section class="companies" id="companies">
        <div class="container">
            <div class="section-title">
                <h2 id="companies-title">Our Bus Partners</h2>
                <p id="companies-subtitle">Travel with trusted and reliable bus companies across Ethiopia</p>
            </div>
            <div class="companies-grid" id="companiesGrid">
                <!-- Companies populated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Enhanced Cities Section -->
    <section class="cities-section" id="cities">
        <div class="container">
            <div class="cities-container">
                <div class="cities-header">
                    <h2 id="cities-title">Explore Ethiopian Cities</h2>
                    <p id="cities-subtitle">Discover the diverse destinations we connect across beautiful Ethiopia</p>
                </div>
                <div class="cities-grid" id="citiesGrid">
                    <!-- Cities populated by JavaScript -->
                </div>
            </div>
        </div>
    </section>


    <!-- Payment Methods Section -->
    <section class="payment-methods-section" id="payment-methods">
        <div class="container">
            <div class="section-title">
                <h2 id="payment-title">Secure Payment Methods</h2>
                <p id="payment-subtitle">Choose from our trusted payment partners</p>
            </div>
            <div class="features-grid">
                <div class="payment-method-card fade-in">
                    <div class="payment-method-icon">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <h3 id="payment1-title">Telebirr</h3>
                    <p id="payment1-desc">Fast and secure mobile payments</p>
                </div>
                <div class="payment-method-card fade-in">
                    <div class="payment-method-icon">
                        <i class="fas fa-university"></i>
                    </div>
                    <h3 id="payment2-title">Commercial Bank of Ethiopia</h3>
                    <p id="payment2-desc">Direct bank transfer and online banking</p>
                </div>
                <div class="payment-method-card fade-in">
                    <div class="payment-method-icon">
                        <i class="fas fa-landmark"></i>
                    </div>
                    <h3 id="payment3-title">Bank of Abyssinia</h3>
                    <p id="payment3-desc">Secure online payment gateway</p>
                </div>
                <div class="payment-method-card fade-in">
                    <div class="payment-method-icon">
                        <i class="fas fa-piggy-bank"></i>
                    </div>
                    <h3 id="payment4-title">Dashen Bank</h3>
                    <p id="payment4-desc">Easy payment through mobile and internet banking</p>
                </div>
            </div>
        </div>
    </section>

    <!-- IMPROVED AI Chatbot Section -->
    <section class="chatbot-section" id="chatbot">
        <div class="container">
            <div class="chatbot-content">
                <div class="chatbot-text">
                    <h2 id="chatbot-title">AI Travel Assistant</h2>
                    <p id="chatbot-subtitle">Get instant help with our AI chatbot for booking, route information, and travel tips.</p>
                    
                    <div class="chatbot-features">
                        <div class="chatbot-feature">
                            <div class="chatbot-icon">
                                <i class="fas fa-comment-dots"></i>
                            </div>
                            <div>
                                <h4 id="chatbot-feature1-title">24/7 Support</h4>
                                <p id="chatbot-feature1-desc">Available anytime to answer your questions</p>
                            </div>
                        </div>
                        <div class="chatbot-feature">
                            <div class="chatbot-icon">
                                <i class="fas fa-route"></i>
                            </div>
                            <div>
                                <h4 id="chatbot-feature2-title">Route Planning</h4>
                                <p id="chatbot-feature2-desc">Find the best routes and connections</p>
                            </div>
                        </div>
                        <div class="chatbot-feature">
                            <div class="chatbot-icon">
                                <i class="fas fa-ticket-alt"></i>
                            </div>
                            <div>
                                <h4 id="chatbot-feature3-title">Booking Assistance</h4>
                                <p id="chatbot-feature3-desc">Help with ticket booking and modifications</p>
                            </div>
                        </div>
                        <div class="chatbot-feature">
                            <div class="chatbot-icon">
                                <i class="fas fa-info-circle"></i>
                            </div>
                            <div>
                                <h4 id="chatbot-feature4-title">Travel Information</h4>
                                <p id="chatbot-feature4-desc">Get details about destinations and amenities</p>
                            </div>
                        </div>
                    </div>
                    
                    <button class="chatbot-btn" id="openChatbot">
                        <i class="fas fa-robot"></i>
                        <span id="chatbot-btn-text">Chat with SwiftBot</span>
                    </button>
                </div>
               
            </div>
        </div>
    </section>

    <!-- Bus Detail Popup -->
    <div class="bus-detail-popup" id="busDetailPopup">
        <div class="bus-detail-content">
            <div class="bus-detail-header">
                <button class="close-detail-popup" id="closeDetailPopup" aria-label="Close popup">
                    <i class="fas fa-times"></i>
                </button>
                <div class="bus-detail-header-content">
                    <div class="bus-detail-logo" id="busDetailLogo">
                        <!-- Logo will be populated by JavaScript -->
                    </div>
                    <div class="bus-detail-info">
                        <h2 id="busDetailName">Bus Company Name</h2>
                        <p id="busDetailDescription">Company description will appear here</p>
                        <div class="company-rating" id="busDetailRating">
                            <!-- Rating stars will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="bus-detail-body">
                <div class="bus-detail-section" id="tripDetailsSection" style="display: none;">
                    <h3 id="popup-trip-title">Trip Details</h3>
                    <div class="trip-info">
                        <div class="trip-route">
                            <div class="trip-from">
                                <i class="fas fa-map-marker-alt" style="color: var(--primary);"></i>
                                <span id="tripFromCity">Departure City</span>
                            </div>
                            <div class="trip-arrow">
                                <i class="fas fa-arrow-right" style="color: var(--accent);"></i>
                            </div>
                            <div class="trip-to">
                                <i class="fas fa-map-marker-alt" style="color: var(--secondary);"></i>
                                <span id="tripToCity">Destination City</span>
                            </div>
                        </div>
                        <div class="trip-date">
                            <i class="fas fa-calendar-alt" style="color: var(--primary);"></i>
                            <span id="tripDate">Travel Date</span>
                        </div>
                    </div>
                </div>
                <div class="bus-detail-section">
                    <h3 id="popup-features-title">Features & Amenities</h3>
                    <div class="features-grid" id="busDetailFeatures">
                        <!-- Features will be populated by JavaScript -->
                    </div>
                </div>
                <div class="bus-detail-section">
                    <h3 id="popup-routes-title">Popular Routes</h3>
                    <div class="routes-list" id="busDetailRoutes">
                        <!-- Routes will be populated by JavaScript -->
                    </div>
                </div>
                <div class="bus-detail-section">
                    <h3 id="popup-about-title">About This Company</h3>
                    <p id="busDetailAbout">Detailed company information will appear here.</p>
                </div>
                <div class="detail-buttons">
                    <button class="btn btn-primary" id="bookTicketBtn">
                        <i class="fas fa-ticket-alt"></i>
                        Book Tickets
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3 id="footer-about-title">SwiftBus</h3>
                    <p id="footer-about-desc">Your trusted partner for bus travel across Ethiopia. We connect you to your destination safely and comfortably.</p>
                    <div class="social-links">
                        <a href="https://facebook.com" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://twitter.com" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="https://instagram.com" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="https://www.linkedin.com/" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3 id="footer-links-title">Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#" id="footer-link-home">Home</a></li>
                        <li><a href="routes.html" id="footer-link-routes">Routes</a></li>
                        <li><a href="book-ticket.html">Book Ticket</a></li>
                        <li><a href="my-tickets.html">My Tickets</a></li>
                        <li><a href="user-dashboard.html">User Dashboard</a></li>
                        <li><a href="search.html">Search Buses</a></li>
                        <li><a href="#cities" id="footer-link-cities">Cities</a></li>
                        <li><a href="#companies" id="footer-link-companies">Bus Companies</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3 id="footer-support-title">Support</h3>
                    <ul class="footer-links">
                        
                        <li><a href="contact-us.html" id="footer-link-contact">Contact Us</a></li>
                        <li><a href="faq.html" id="footer-link-faq">FAQ</a></li>
                        <li><a href="terms-conditions.html" id="footer-link-terms">Terms & Conditions</a></li>
                        <li><a href="privacy-policy.html" id="footer-link-privacy">Privacy Policy</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3 id="footer-contact-title">Contact Info</h3>
                    <ul class="footer-links">
                        <li><i class="fas fa-map-marker-alt"></i> <span id="footer-address">Kombolcha, Ethiopia</span></li>
                        <li><i class="fas fa-phone"></i> <span id="footer-phone">+251 945710924</span></li>
                        <li><i class="fas fa-envelope"></i> <span id="footer-email">info@swiftbus.et</span></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p id="copyright-text">&copy; 2025 SwiftBus. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button class="back-to-top" id="backToTop" aria-label="Back to top">
        <i class="fas fa-chevron-up"></i>
    </button>

    <script>
        // Comprehensive data for the website
        const routes = [
            { origin: "Addis Ababa", destination: "Kombolcha", duration: "5-6 hours", price: 250, distance: "380km" },
            { origin: "Dessie", destination: "Bahirdar", duration: "10-11 hours", price: 350, distance: "580km" },
            { origin: "Addis Ababa", destination: "Dessie", duration: "7-8 hours", price: 280, distance: "400km" },
            { origin: "Mekele", destination: "Adama", duration: "8-9 hours", price: 320, distance: "450km" },
            { origin: "Jimma", destination: "Hawasa", duration: "4-5 hours", price: 220, distance: "275km" },
            { origin: "Addis Ababa", destination: "Jimma", duration: "6-7 hours", price: 280, distance: "350km" },
            { origin: "Bahirdar", destination: "Gonder", duration: "3-4 hours", price: 180, distance: "180km" },
            { origin: "Adama", destination: "Hawasa", duration: "3-4 hours", price: 200, distance: "250km" },
            { origin: "Dessie", destination: "Kombolcha", duration: "1-2 hours", price: 80, distance: "75km" }
        ];

        // Enhanced data for cities with more details
        const enhancedCities = [
            { 
                name: "Addis Ababa", 
                icon: "", 
                routes: 45,
                features: ["Capital", "International Airport", "Business Hub"]
            },
            { 
                name: "Kombolcha", 
                icon: "", 
                routes: 15,
                features: ["Industrial City", "Textile Hub", "Mountain View"]
            },
            { 
                name: "Bahirdar", 
                icon: "", 
                routes: 32,
                features: ["Blue Nile", "Lake Tana", "Resort Town"]
            },
            { 
                name: "Dessie", 
                icon: "", 
                routes: 25,
                features: ["Commercial Hub", "Historic Town", "University"]
            },
            { 
                name: "Adama", 
                icon: "", 
                routes: 35,
                features: ["Industrial City", "Transport Hub", "Hot Springs"]
            },
            { 
                name: "Hawasa", 
                icon: "", 
                routes: 28,
                features: ["Lake City", "Resort Area", "University"]
            },
            { 
                name: "Arbaminch", 
                icon: "", 
                routes: 15,
                features: ["Lakeside City", "National Park", "Eco-Tourism"]
            },
            { 
                name: "Gonder", 
                icon: "", 
                routes: 26,
                features: ["Castle City", "Historic Capital", "Tourist Destination"]
            },
            { 
                name: "Mekele", 
                icon: "", 
                routes: 25,
                features: ["Mountain City", "Commercial Hub", "University"]
            },
            { 
                name: "Jimma", 
                icon: "", 
                routes: 20,
                features: ["Coffee Region", "Agricultural Center", "University"]
            }
        ];

        // Enhanced company data with detailed information (Only 4 companies as requested)
        const enhancedCarriers = [
            { 
                name: "Selam Bus", 
                logo: "", 
                features: ["WiFi", "AC", "Toilet", "Entertainment", "Meals", "Charging Ports", "Spacious Legroom"], 
                rating: 4.8,
                routes: ["Addis Ababa", "Hawasa", "Bahirdar", "Mekele", "Jimma"],
                description: "Premium long-distance travel experience",
                about: "Selam Bus is one of Ethiopia's leading bus companies, known for its premium service and modern fleet. Established in 2005, we've been connecting major cities with comfort and reliability."
            },
            { 
                name: "Abay Bus", 
                logo: "", 
                features: ["WiFi", "AC", "Comfortable Seats", "Snacks", "On-time Service", "Experienced Drivers"], 
                rating: 4.5,
                routes: ["Addis Ababa", "Bahirdar", "Gonder", "Dessie", "Kombolcha"],
                description: "Reliable service across northern Ethiopia",
                about: "Abay Bus has been serving northern Ethiopia since 1998, building a reputation for reliability and customer satisfaction. We specialize in routes through the historic northern circuit."
            },
            { 
                name: "Ethio Bus", 
                logo: "", 
                features: ["AC", "Affordable", "Frequent Departures", "Family Friendly", "Luggage Space"], 
                rating: 4.2,
                routes: ["Addis Ababa", "Adama", "Hawasa", "Jimma", "Arbaminch"],
                description: "Your everyday travel companion",
                about: "Ethio Bus makes daily travel convenient and affordable. With frequent departures and competitive pricing, we're the preferred choice for commuters and families."
            },
            { 
                name: "Habesha Bus", 
                logo: "", 
                features: ["WiFi", "AC", "Comfortable Seats", "On-time", "Cultural Entertainment", "Traditional Snacks"], 
                rating: 4.4,
                routes: ["Addis Ababa", "Bahirdar", "Gonder", "Dessie", "Mekele"],
                description: "Experience Ethiopian hospitality on wheels",
                about: "Habesha Bus combines modern comfort with traditional Ethiopian hospitality. Our unique service includes cultural entertainment and traditional snacks."
            }
        ];

        // Current user state
        let currentUser = null;

        // Current language state
        let currentLanguage = 'en';

        // Chatbot modal state
        let modalChatHistory = [];

        // Current selected company for booking
        let currentSelectedCompany = null;

        // Language translations
        const translations = {
            en: {
                // Hero section
                'hero-title': 'Journey Across Ethiopia',
                'hero-subtitle': 'Experience comfort and reliability on every route',
                
                // Features section
                'features-title': 'Why Choose SwiftBus?',
                'features-subtitle': 'We provide the best bus booking experience with these amazing features',
                'feature1-title': 'Quick Booking',
                'feature1-desc': 'Book your bus tickets in just a few clicks with our user-friendly platform.',
                'feature2-title': 'Safe & Secure',
                'feature2-desc': 'Your payments and personal information are protected with advanced security.',
                'feature3-title': '24/7 Support',
                'feature3-desc': 'Our customer support team is available round the clock to assist you.',
                'feature4-title': 'Best Prices',
                'feature4-desc': 'We offer competitive prices with no hidden charges on all bus routes.',
                
                // Routes section
                'routes-title': 'Popular Routes',
                'routes-subtitle': 'Explore our most popular bus routes across Ethiopia',
                
                // Companies section
                'companies-title': 'Our Bus Partners',
                'companies-subtitle': 'Travel with trusted and reliable bus companies across Ethiopia',
                
                // Cities section
                'cities-title': 'Explore Ethiopian Cities',
                'cities-subtitle': 'Discover the diverse destinations we connect across beautiful Ethiopia',
                
              
                
                // Payment section
                'payment-title': 'Secure Payment Methods',
                'payment-subtitle': 'Choose from our trusted payment partners',
                'payment1-title': 'Telebirr',
                'payment1-desc': 'Fast and secure mobile payments',
                'payment2-title': 'Commercial Bank of Ethiopia',
                'payment2-desc': 'Direct bank transfer and online banking',
                'payment3-title': 'Bank of Abyssinia',
                'payment3-desc': 'Secure online payment gateway',
                'payment4-title': 'Dashen Bank',
                'payment4-desc': 'Easy payment through mobile and internet banking',
                
                // Chatbot section
                'chatbot-title': 'AI Travel Assistant',
                'chatbot-subtitle': 'Get instant help with our AI chatbot for booking, route information, and travel tips.',
                'chatbot-btn-text': 'Chat with SwiftBot',
                'chatbot-feature1-title': '24/7 Support',
                'chatbot-feature1-desc': 'Available anytime to answer your questions',
                'chatbot-feature2-title': 'Route Planning',
                'chatbot-feature2-desc': 'Find the best routes and connections',
                'chatbot-feature3-title': 'Booking Assistance',
                'chatbot-feature3-desc': 'Help with ticket booking and modifications',
                'chatbot-feature4-title': 'Travel Information',
                'chatbot-feature4-desc': 'Get details about destinations and amenities',
                
                // Popup
                'popup-features-title': 'Features & Amenities',
                'popup-routes-title': 'Popular Routes',
                'popup-about-title': 'About This Company',
                'popup-trip-title': 'Trip Details',
                
                // Footer
                'footer-about-title': 'SwiftBus',
                'footer-about-desc': 'Your trusted partner for bus travel across Ethiopia. We connect you to your destination safely and comfortably.',
                'footer-links-title': 'Quick Links',
                'footer-link-home': 'Home',
                'footer-link-routes': 'Routes',
                'footer-link-cities': 'Cities',
                'footer-link-companies': 'Bus Companies',
                
                'footer-support-title': 'Support',
                'footer-link-help': 'Help Center',
                'footer-link-contact': 'Contact Us',
                'footer-link-faq': 'FAQ',
                'footer-link-terms': 'Terms & Conditions',
                'footer-link-privacy': 'Privacy Policy',
                'footer-contact-title': 'Contact Info',
                'footer-address': 'Kombolcha, Ethiopia',
                'footer-phone': '+251945710924',
                'footer-email': 'info@swiftbus.et',
                'copyright-text': ' 2025 SwiftBus. All rights reserved.',
                
                // Buttons
                'login-btn': 'Login',
                'signup-btn': 'Sign Up',
                'book-btn': 'Book Now',
                'book-tickets-btn': 'Book Tickets',
                'apply-code-btn': 'Apply Code'
            },
            am: {
                // Hero section
                'hero-title': '  ',
                'hero-subtitle': '      ',
                
                // Features section
                'features-title': '  ?',
                'features-subtitle': '       ',
                'feature1-title': ' ',
                'feature1-desc': '    ',
                'feature2-title': ' ',
                'feature2-desc': '       ',
                'feature3-title': '24/7 ',
                'feature3-desc': '      ',
                'feature4-title': ' ',
                'feature4-desc': '         ',
                
                // Routes section
                'routes-title': ' ',
                'routes-subtitle': '       ',
                
                // Companies section
                'companies-title': ' ',
                'companies-subtitle': '       ',
                
                // Cities section
                'cities-title': '  ',
                'cities-subtitle': '      ',
                
                
                // Payment section
                'payment-title': '   ',
                'payment-subtitle': '   ',
                'payment1-title': '',
                'payment1-desc': '     ',
                'payment2-title': '   ',
                'payment2-desc': '     ',
                'payment3-title': '  ',
                'payment3-desc': '     ',
                'payment4-title': ' ',
                'payment4-desc': '     ',
                
                // Chatbot section
                'chatbot-title': 'AI  ',
                'chatbot-subtitle': '       AI    ',
                'chatbot-btn-text': ' ',
                'chatbot-feature1-title': '24/7 ',
                'chatbot-feature1-desc': '   ',
                'chatbot-feature2-title': ' ',
                'chatbot-feature2-desc': '    ',
                'chatbot-feature3-title': ' ',
                'chatbot-feature3-desc': '     ',
                'chatbot-feature4-title': ' ',
                'chatbot-feature4-desc': '      ',
                
                // Popup
                'popup-features-title': '  ',
                'popup-routes-title': ' ',
                'popup-about-title': ' ',
                'popup-trip-title': ' ',
                
                // Footer
                'footer-about-title': '',
                'footer-about-desc': '              ',
                'footer-links-title': ' ',
                'footer-link-home': '',
                'footer-link-routes': '',
                'footer-link-cities': '',
                'footer-link-companies': ' ',
                'footer-support-title': '',
                'footer-link-help': ' ',
                'footer-link-contact': '',
                'footer-link-faq': '  ',
                'footer-link-terms': '  ',
                'footer-link-privacy': ' ',
                'footer-contact-title': ' ',
                'footer-address': '  ',
                'footer-phone': '+251 911 234 567',
                'footer-email': 'info@swiftbus.et',
                'copyright-text': ' 2025     ',
                
                // Buttons
                'login-btn': '',
                'signup-btn': '',
                'book-btn': ' ',
                'book-tickets-btn': ' ',
                'apply-code-btn': ' '
            }
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

       function initializeApp() {
    // Check if this is the first visit in this session
    const hasVisitedBefore = sessionStorage.getItem('hasVisitedIndex');
    
    if (!hasVisitedBefore) {
        // First visit - show loading screen then hide it
        setTimeout(() => {
            document.getElementById('loader').classList.add('hidden');
            // Mark that user has visited the index page
            sessionStorage.setItem('hasVisitedIndex', 'true');
        }, 1000);
    } else {
        // Not first visit - hide loading screen immediately
        document.getElementById('loader').classList.add('hidden');
    }

    // Check user login state
    checkUserLoginState();
            // Populate data
            populateRoutes();
            populateEnhancedCities();
            populateEnhancedCarriers();
            setupEventListeners();
            
            // Initialize chatbot modal
            initializeChatbotModal();
            
            // Apply initial language
            updateLanguage();
            
            // Set today's date for travel date input
            const today = new Date();
            const formattedDate = today.toISOString().split('T')[0];
            document.getElementById('travelDate').value = formattedDate;
            document.getElementById('travelDate').min = formattedDate;
        }

        // Check user login state
        async function checkUserLoginState() {
            try {
                // Check session with backend API
                const response = await swiftBusAPI.checkSession();
                if (response.success) {
                    // User is logged in
                    currentUser = response.data;
                    updateHeaderForLoggedInUser();
                    updateMobileMenuForLoggedInUser();
                } else {
                    // User not logged in
                    currentUser = null;
                    updateHeaderForLoggedOutUser();
                    updateMobileMenuForLoggedOutUser();
                }
            } catch (error) {
                // Session check failed - user not logged in
                console.log('No active session');
                currentUser = null;
                updateHeaderForLoggedOutUser();
                updateMobileMenuForLoggedOutUser();
            }
        }

        // Update header for logged in users
        function updateHeaderForLoggedInUser() {
            const authButtons = document.getElementById('authButtons');
            
            if (authButtons) {
                authButtons.innerHTML = `
                    <div class="language-selector">
                        <button class="language-btn active" data-lang="en">EN</button>
                        <button class="language-btn" data-lang="am"></button>
                    </div>
                    <div class="user-menu">
                        <div style="position: relative;">
                            <button class="user-profile-btn" id="profileDropdown">
                                <i class="fas fa-user-circle"></i>
                                <span>${currentUser.name.split(' ')[0]}</span>
                                <i class="fas fa-caret-down" style="margin-left: 5px;"></i>
                            </button>
                            <div class="dropdown-menu" id="userDropdownMenu">
                                <div class="user-info-header">
                                    <div class="user-avatar-small" id="indexUserAvatar">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <div class="user-details">
                                        <div class="user-name">
                                            <span>${currentUser.name}</span>
                                        </div>
                                        <div class="user-role ${currentUser.role}">
                                            <i class="fas fa-${currentUser.role === 'admin' ? 'crown' : 'user'}"></i>
                                            ${currentUser.role === 'admin' ? 'Administrator' : 'User'}
                                        </div>
                                    </div>
                                </div>
                                <div class="dropdown-links">
                                    <a href="#" id="profileLink">
                                        <i class="fas fa-user-circle"></i>
                                        <span>Profile</span>
                                    </a>
                                    ${currentUser.role === 'user' ? `
                                    <a href="#" id="ticketsLink">
                                        <i class="fas fa-ticket-alt"></i>
                                        <span>My Tickets</span>
                                    </a>
                                    ` : ''}
                                    <a href="#" id="dashboardLink">
                                        <i class="fas fa-tachometer-alt"></i>
                                        <span>Dashboard</span>
                                    </a>

                                    <a href="#" class="logout" id="logoutBtn">
                                        <i class="fas fa-sign-out-alt"></i>
                                        <span>Logout</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                // Add dropdown functionality
                const profileDropdown = document.getElementById('profileDropdown');
                const dropdownMenu = document.getElementById('userDropdownMenu');
                if (profileDropdown && dropdownMenu) {
                    profileDropdown.addEventListener('click', (e) => {
                        e.stopPropagation();
                        dropdownMenu.classList.toggle('show');
                    });
                    
                    // Close dropdown when clicking outside
                    document.addEventListener('click', (e) => {
                        if (!e.target.closest('.user-menu')) {
                            dropdownMenu.classList.remove('show');
                        }
                    });
                }
                
                // Add navigation functionality
                setupNavigationLinks();
                
                // Update profile image in dropdown
                updateIndexProfileImage(currentUser.profileImage);
                
                // Update mobile menu button to show user name
                updateMobileMenuButton();
                
                // Add logout functionality
                document.getElementById('logoutBtn').addEventListener('click', (e) => {
                    e.preventDefault();
                    logoutUser();
                });
                
                // Re-attach language button listeners
                document.querySelectorAll('.language-selector .language-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const lang = this.getAttribute('data-lang');
                        changeLanguage(lang);
                    });
                });
            }
        }

        function updateIndexProfileImage(profileImagePath) {
            const indexUserAvatar = document.getElementById('indexUserAvatar');
            if (!indexUserAvatar) return;
            
            if (profileImagePath && profileImagePath !== 'Not provided') {
                // Show uploaded image
                indexUserAvatar.innerHTML = `<img src="${profileImagePath}" alt="Profile picture" onerror="this.parentElement.innerHTML='<i class=\\'fas fa-user\\'></i>'">`;
            } else {
                // Show default icon
                indexUserAvatar.innerHTML = '<i class="fas fa-user"></i>';
            }
        }

        // Setup navigation links with role-based redirection
        function setupNavigationLinks() {
            // Profile link
            const profileLink = document.getElementById('profileLink');
            if (profileLink) {
                profileLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    setTimeout(() => {
                        if (currentUser && currentUser.role === 'admin') {
                            window.location.href = 'admin-profile.html';
                        } else {
                            window.location.href = 'user-profile.html';
                        }
                    }, 100);
                });
            }

            // Tickets link (only for users)
            const ticketsLink = document.getElementById('ticketsLink');
            if (ticketsLink) {
                ticketsLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    setTimeout(() => {
                        if (currentUser && currentUser.role === 'user') {
                            window.location.href = 'my-tickets.html';
                        }
                    }, 100);
                });
            }

            // Dashboard link with role-based redirection
            const dashboardLink = document.getElementById('dashboardLink');
            if (dashboardLink) {
                dashboardLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    setTimeout(() => {
                        if (currentUser && currentUser.role === 'admin') {
                            window.location.href = 'admin-dashboard.html';
                        } else {
                            window.location.href = 'user-dashboard.html';
                        }
                    }, 100);
                });
            }


        }

        // Update mobile menu button to show user name
        function updateMobileMenuButton() {
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            if (mobileMenuBtn && currentUser) {
                const firstName = currentUser.name.split(' ')[0];
                mobileMenuBtn.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <div class="mobile-user-avatar" id="mobileUserAvatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <span style="font-size: 14px; font-weight: 500;">${firstName}</span>
                        <i class="fas fa-caret-down" style="font-size: 12px;"></i>
                    </div>
                `;
                
                // Update mobile user avatar
                updateMobileUserAvatar(currentUser.profileImage);
            }
        }

        // Update mobile user avatar
        function updateMobileUserAvatar(profileImagePath) {
            const mobileUserAvatar = document.getElementById('mobileUserAvatar');
            if (!mobileUserAvatar) return;
            
            if (profileImagePath && profileImagePath !== 'Not provided') {
                mobileUserAvatar.innerHTML = `<img src="${profileImagePath}" alt="Profile picture" onerror="this.parentElement.innerHTML='<i class=\\'fas fa-user\\'></i>'">`;
            } else {
                mobileUserAvatar.innerHTML = '<i class="fas fa-user"></i>';
            }
        }

        // Update mobile menu for logged in users
        function updateMobileMenuForLoggedInUser() {
            const mobileNavLinks = document.getElementById('mobileNavLinks');
            if (mobileNavLinks) {
                mobileNavLinks.innerHTML = `
                    <li>
                        <div class="mobile-user-profile">
                            <div class="mobile-user-info">
                                <div class="mobile-user-name">
                                    <i class="fas fa-user"></i>
                                    <span>${currentUser.name}</span>
                                </div>
                                <div class="mobile-user-role ${currentUser.role}">
                                    <i class="fas fa-${currentUser.role === 'admin' ? 'crown' : 'user'}"></i>
                                    ${currentUser.role === 'admin' ? 'Administrator' : 'User'}
                                </div>
                            </div>
                        </div>
                    </li>
                    <li><a href="#">Home</a></li>
                    <li><a href="routes.html">Routes</a></li>
                    <li><a href="#cities">Cities</a></li>
                    <li><a href="#companies">Bus Companies</a></li>
                    <li><a href="#" id="mobileProfileLink">
                        <i class="fas fa-user-circle" style="margin-right: 10px;"></i> Profile
                    </a></li>
                    ${currentUser.role === 'user' ? `
                    <li><a href="#" id="mobileTicketsLink">
                        <i class="fas fa-ticket-alt" style="margin-right: 10px;"></i> My Tickets
                    </a></li>
                    ` : ''}
                    <li><a href="#" id="mobileDashboardLink">
                        <i class="fas fa-tachometer-alt" style="margin-right: 10px;"></i> Dashboard
                    </a></li>
                    ${currentUser.role === 'admin' ? `
                    <li><a href="#" id="mobileReportsLink">
                        <i class="fas fa-chart-bar" style="margin-right: 10px;"></i> Reports
                    </a></li>
                    ` : ''}
                    <li>
                        <div class="mobile-language-selector">
                            <h4>Change Language</h4>
                            <div class="mobile-language-buttons">
                                <button class="language-btn active" data-lang="en">English (EN)</button>
                                <button class="language-btn" data-lang="am"> ()</button>
                            </div>
                        </div>
                    </li>
                    <li>
                        <button class="btn btn-danger" style="width: 100%;" id="mobileLogoutBtn">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </li>
                `;
                
                // Re-attach language button listeners
                setTimeout(() => {
                    document.querySelectorAll('.mobile-nav .language-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const lang = this.getAttribute('data-lang');
                            changeLanguage(lang);
                        });
                    });
                    
                    // Setup mobile navigation links
                    setupMobileNavigationLinks();
                    
                    // Mobile logout button
                    document.getElementById('mobileLogoutBtn').addEventListener('click', logoutUser);
                }, 100);
            }
        }

        // Setup mobile navigation links with role-based redirection
        function setupMobileNavigationLinks() {
            // Profile link
            const mobileProfileLink = document.getElementById('mobileProfileLink');
            if (mobileProfileLink) {
                mobileProfileLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    if (currentUser && currentUser.role === 'admin') {
                        window.location.href = 'admin-profile.html';
                    } else {
                        window.location.href = 'user-profile.html';
                    }
                    document.querySelector('.mobile-nav').classList.remove('active');
                });
            }

            // Tickets link (only for users)
            const mobileTicketsLink = document.getElementById('mobileTicketsLink');
            if (mobileTicketsLink) {
                mobileTicketsLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    if (currentUser && currentUser.role === 'user') {
                        window.location.href = 'my-tickets.html';
                        document.querySelector('.mobile-nav').classList.remove('active');
                    }
                });
            }

            // Dashboard link with role-based redirection
            const mobileDashboardLink = document.getElementById('mobileDashboardLink');
            if (mobileDashboardLink) {
                mobileDashboardLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    if (currentUser && currentUser.role === 'admin') {
                        window.location.href = 'admin-dashboard.html';
                    } else {
                        window.location.href = 'user-dashboard.html';
                    }
                    document.querySelector('.mobile-nav').classList.remove('active');
                });
            }


        }

        // Update header for logged out users
        function updateHeaderForLoggedOutUser() {
            const authButtons = document.getElementById('authButtons');
            
            if (authButtons) {
                authButtons.innerHTML = `
                    <div class="language-selector">
                        <button class="language-btn active" data-lang="en">EN</button>
                        <button class="language-btn" data-lang="am"></button>
                    </div>
                    <button class="btn btn-outline" id="loginBtn">Login</button>
                    <button class="btn btn-primary" id="signupBtn">Sign Up</button>
                `;
                
                // Re-attach event listeners
                document.getElementById('loginBtn').addEventListener('click', function(e) {
                    e.preventDefault();
                    window.location.href = 'login.html';
                });
                
                document.getElementById('signupBtn').addEventListener('click', function(e) {
                    e.preventDefault();
                    window.location.href = 'signup.html';
                });
                
                // Re-attach language button listeners
                document.querySelectorAll('.language-selector .language-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const lang = this.getAttribute('data-lang');
                        changeLanguage(lang);
                    });
                });
            }
        }

        // Reset mobile menu button to default
        function resetMobileMenuButton() {
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            if (mobileMenuBtn) {
                mobileMenuBtn.innerHTML = '<i class="fas fa-bars"></i>';
                mobileMenuBtn.style.cssText = '';
            }
        }

        // Update mobile menu for logged out users
        function updateMobileMenuForLoggedOutUser() {
            const mobileNavLinks = document.getElementById('mobileNavLinks');
            if (mobileNavLinks) {
                mobileNavLinks.innerHTML = `
                    <li><a href="#">Home</a></li>
                    <li><a href="routes.html">Routes</a></li>
                    <li><a href="#cities">Cities</a></li>
                    <li><a href="#companies">Bus Companies</a></li>
                    <li>
                        <div class="mobile-language-selector">
                            <h4>Change Language</h4>
                            <div class="mobile-language-buttons">
                                <button class="language-btn active" data-lang="en">English (EN)</button>
                                <button class="language-btn" data-lang="am"> ()</button>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div style="display: flex; gap: 10px; margin-top: 15px;">
                            <button class="btn btn-outline" style="flex: 1;" id="mobileLoginBtn">Login</button>
                            <button class="btn btn-primary" style="flex: 1;" id="mobileSignupBtn">Sign Up</button>
                        </div>
                    </li>
                `;
                
                // Re-attach mobile login/signup listeners
                setTimeout(() => {
                    document.getElementById('mobileLoginBtn').addEventListener('click', function(e) {
                        e.preventDefault();
                        window.location.href = 'login.html';
                    });
                    
                    document.getElementById('mobileSignupBtn').addEventListener('click', function(e) {
                        e.preventDefault();
                        window.location.href = 'signup.html';
                    });
                    
                    // Re-attach language button listeners
                    document.querySelectorAll('.mobile-nav .language-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const lang = this.getAttribute('data-lang');
                            changeLanguage(lang);
                        });
                    });
                }, 100);
            }
        }

        // Logout function
        async function logoutUser() {
            try {
                // Call backend logout API
                const response = await swiftBusAPI.logout();
                
                if (response.success) {
                    // Backend logout successful
                    currentUser = null;
                    updateHeaderForLoggedOutUser();
                    updateMobileMenuForLoggedOutUser();
                    
                    showNotification(currentLanguage === 'en' 
                        ? 'Successfully logged out' 
                        : '  ');
                } else {
                    // Backend logout failed, but clear frontend anyway
                    console.error('Backend logout failed:', response.message);
                    currentUser = null;
                    updateHeaderForLoggedOutUser();
                    updateMobileMenuForLoggedOutUser();
                    
                    showNotification(currentLanguage === 'en' 
                        ? 'Logged out (with warnings)' 
                        : ' ( )');
                }
            } catch (error) {
                // API call failed, but clear frontend anyway
                console.error('Logout API error:', error);
                currentUser = null;
                updateHeaderForLoggedOutUser();
                updateMobileMenuForLoggedOutUser();
                
                showNotification(currentLanguage === 'en' 
                    ? 'Logged out (connection error)' 
                    : ' ( )');
            }
            
            // Close mobile menu if open
            document.querySelector('.mobile-nav').classList.remove('active');
            // Close dropdown if open
            const dropdownMenu = document.getElementById('userDropdownMenu');
            if (dropdownMenu) {
                dropdownMenu.classList.remove('show');
            }
        }

        function populateRoutes() {
            const routesContainer = document.getElementById('routesContainer');
            routesContainer.innerHTML = ''; // Clear existing
            routes.forEach(route => {
                const routeCard = document.createElement('div');
                routeCard.className = 'route-card fade-in';
                routeCard.innerHTML = `
                    <div class="route-info">
                        <div class="route-origin">${route.origin}</div>
                        <div class="route-arrow"><i class="fas fa-arrow-right"></i></div>
                        <div class="route-destination">${route.destination}</div>
                    </div>
                    <div class="route-details">
                        <span><i class="far fa-clock"></i> ${route.duration}</span>
                        <span><i class="fas fa-tag"></i> ETB ${route.price}</span>
                        <span><i class="fas fa-road"></i> ${route.distance}</span>
                    </div>
                `;
                routesContainer.appendChild(routeCard);
            });
        }

        function populateEnhancedCities() {
            const citiesGrid = document.getElementById('citiesGrid');
            citiesGrid.innerHTML = ''; // Clear existing
            
            // Enhanced city descriptions
            const cityDescriptions = {
                "Addis Ababa": {
                    en: "Ethiopia's vibrant capital and diplomatic hub",
                    am: "      "
                },
                "Kombolcha": {
                    en: "Industrial powerhouse with stunning mountain views",
                    am: "     "
                },
                "Bahirdar": {
                    en: "Beautiful lakeside city on Lake Tana shores",
                    am: "       "
                },
                "Dessie": {
                    en: "Historic commercial center in the highlands",
                    am: "      "
                },
                "Adama": {
                    en: "Strategic transport hub with natural hot springs",
                    am: "      "
                },
                "Hawasa": {
                    en: "Scenic lake resort city in the Rift Valley",
                    am: "       "
                },
                "Arbaminch": {
                    en: "Gateway to national parks and pristine lakes",
                    am: "       "
                },
                "Gonder": {
                    en: "Royal castle city with rich imperial history",
                    am: "       "
                },
                "Mekele": {
                    en: "Northern gateway with ancient rock churches",
                    am: "       "
                },
                "Jimma": {
                    en: "Coffee capital surrounded by lush plantations",
                    am: "     "
                }
            };
            
            enhancedCities.forEach((city, index) => {
                const cityCard = document.createElement('div');
                cityCard.className = 'city-card fade-in';
                cityCard.style.animationDelay = `${index * 0.1}s`;
                
                const description = cityDescriptions[city.name] || { en: "Beautiful Ethiopian destination", am: "  " };
                
                cityCard.innerHTML = `
                    <div class="city-icon">${city.icon}</div>
                    <h3>${city.name}</h3>
                    <p class="city-description">${currentLanguage === 'en' ? description.en : description.am}</p>
                    <div class="city-routes">
                        <i class="fas fa-route"></i>
                        ${city.routes} ${currentLanguage === 'en' ? 'routes available' : ' '}
                    </div>
                    <div class="city-features">
                        ${city.features.map(feature => `<span class="city-feature">${feature}</span>`).join('')}
                    </div>
                `;
                
                // Add click event to show more info
                cityCard.addEventListener('click', function() {
                    showCityInfo(city, description);
                });
                
                citiesGrid.appendChild(cityCard);
            });
        }

        // Show city information popup
        function showCityInfo(city, description) {
            const modal = document.createElement('div');
            modal.className = 'city-info-modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 2000;
                backdrop-filter: blur(5px);
            `;
            
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: white;
                padding: 30px;
                border-radius: 20px;
                max-width: 500px;
                width: 90%;
                text-align: center;
                color: var(--dark);
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
                animation: slideUp 0.3s ease;
            `;
            
            modalContent.innerHTML = `
                <div style="font-size: 48px; margin-bottom: 15px;">${city.icon}</div>
                <h2 style="color: var(--primary); margin-bottom: 10px;">${city.name}</h2>
                <p style="color: var(--gray); margin-bottom: 20px; font-style: italic;">
                    ${currentLanguage === 'en' ? description.en : description.am}
                </p>
                <div style="display: flex; justify-content: center; gap: 20px; margin: 20px 0; flex-wrap: wrap;">
                    <div style="text-align: center;">
                        <div style="font-size: 24px; font-weight: bold; color: var(--primary);">${city.routes}</div>
                        <div style="font-size: 12px; color: var(--gray);">${currentLanguage === 'en' ? 'Routes' : ''}</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 24px; font-weight: bold; color: var(--secondary);">${city.features.length}</div>
                        <div style="font-size: 12px; color: var(--gray);">${currentLanguage === 'en' ? 'Features' : ''}</div>
                    </div>
                </div>
                <div style="margin: 20px 0;">
                    <h4 style="color: var(--dark); margin-bottom: 10px;">${currentLanguage === 'en' ? 'Key Features:' : ' :'}</h4>
                    <div style="display: flex; flex-wrap: wrap; gap: 8px; justify-content: center;">
                        ${city.features.map(feature => `
                            <span style="background: var(--light); padding: 6px 12px; border-radius: 15px; font-size: 12px; color: var(--dark);">
                                ${feature}
                            </span>
                        `).join('')}
                    </div>
                </div>
                <button onclick="this.closest('.city-info-modal').remove()" 
                        style="background: var(--primary); color: white; border: none; padding: 12px 24px; border-radius: 25px; cursor: pointer; margin-top: 15px; transition: all 0.3s ease;"
                        onmouseover="this.style.background='#1557b0'" 
                        onmouseout="this.style.background='var(--primary)'">
                    ${currentLanguage === 'en' ? 'Close' : ''}
                </button>
            `;
            
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
            
            // Close on outside click
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }

        function populateEnhancedCarriers() {
            const companiesGrid = document.getElementById('companiesGrid');
            companiesGrid.innerHTML = ''; // Clear existing
            enhancedCarriers.forEach(carrier => {
                const companyCard = document.createElement('div');
                companyCard.className = 'company-card fade-in';
                companyCard.setAttribute('data-company', JSON.stringify(carrier).replace(/'/g, "&#39;"));
                companyCard.style.cursor = 'pointer';
                
                companyCard.innerHTML = `
                    <div class="company-logo">
                        <span style="font-size: 48px;">${carrier.logo}</span>
                    </div>
                    <div class="company-content">
                        <h3>${carrier.name}</h3>
                        <p style="text-align: center; color: var(--gray); margin-bottom: 15px; font-size: 14px;">${carrier.description}</p>
                        <div class="company-features">
                            ${carrier.features.slice(0, 4).map(feature => `<span class="feature-tag">${feature}</span>`).join('')}
                            ${carrier.features.length > 4 ? `<span class="feature-tag">+${carrier.features.length - 4} ${currentLanguage === 'en' ? 'more' : ''}</span>` : ''}
                        </div>
                        <div class="company-rating">
                            ${'<i class="fas fa-star"></i>'.repeat(Math.floor(carrier.rating))}
                            ${carrier.rating % 1 !== 0 ? '<i class="fas fa-star-half-alt"></i>' : ''}
                            ${'<i class="far fa-star"></i>'.repeat(5 - Math.ceil(carrier.rating))}
                            <span style="color: var(--dark); margin-left: 5px;">${carrier.rating}</span>
                        </div>
                        <div class="text-center" style="font-size: 12px; color: var(--gray); margin: 10px 0;">
                            ${currentLanguage === 'en' ? 'Routes:' : ':'} ${carrier.routes.slice(0, 3).join(', ')}${carrier.routes.length > 3 ? '...' : ''}
                        </div>
                        <button class="book-btn" data-company='${JSON.stringify(carrier).replace(/'/g, "&#39;")}'>
                            ${currentLanguage === 'en' ? 'Book Now' : ' '}
                        </button>
                    </div>
                `;
                
                // Make entire card clickable for popup, but prevent book button from triggering popup
                companyCard.addEventListener('click', function(e) {
                    // Check if the clicked element is the book button or inside the book button
                    if (e.target.classList.contains('book-btn') || e.target.closest('.book-btn')) {
                        // Let the book button handle its own click event
                        return;
                    }
                    
                    // Show popup for any other click on the card
                    const companyData = JSON.parse(this.getAttribute('data-company').replace(/&#39;/g, "'"));
                    showBusDetailPopup(companyData);
                });
                
                companiesGrid.appendChild(companyCard);
            });
        }

        // Function to show bus detail popup
        function showBusDetailPopup(company) {
            const popup = document.getElementById('busDetailPopup');
            const logo = document.getElementById('busDetailLogo');
            const name = document.getElementById('busDetailName');
            const description = document.getElementById('busDetailDescription');
            const rating = document.getElementById('busDetailRating');
            const features = document.getElementById('busDetailFeatures');
            const routes = document.getElementById('busDetailRoutes');
            const about = document.getElementById('busDetailAbout');

            // Store current selected company
            currentSelectedCompany = company;

            // Check if there's search data to show trip details
            const tripDetailsSection = document.getElementById('tripDetailsSection');
            const originSelect = document.getElementById('originSelect');
            const destinationSelect = document.getElementById('destinationSelect');
            const travelDate = document.getElementById('travelDate');
            
            if (originSelect.value && destinationSelect.value) {
                // Show trip details section
                tripDetailsSection.style.display = 'block';
                document.getElementById('tripFromCity').textContent = originSelect.value;
                document.getElementById('tripToCity').textContent = destinationSelect.value;
                document.getElementById('tripDate').textContent = travelDate.value || 'Not selected';
            } else {
                // Hide trip details section if no search data
                tripDetailsSection.style.display = 'none';
            }

            // Populate popup with company data
            logo.innerHTML = `<span style="font-size: 48px;">${company.logo}</span>`;
            name.textContent = company.name;
            description.textContent = company.description;
            
            // Rating stars
            rating.innerHTML = `
                ${'<i class="fas fa-star"></i>'.repeat(Math.floor(company.rating))}
                ${company.rating % 1 !== 0 ? '<i class="fas fa-star-half-alt"></i>' : ''}
                ${'<i class="far fa-star"></i>'.repeat(5 - Math.ceil(company.rating))}
                <span style="margin-left: 10px;">${company.rating}/5</span>
            `;
            
            // Features
            features.innerHTML = company.features.map(feature => `
                <div class="feature-item">
                    <i class="fas fa-check-circle"></i>
                    <div>${feature}</div>
                </div>
            `).join('');
            
            // Routes
            routes.innerHTML = company.routes.map(route => `
                <div class="route-item">${route}</div>
            `).join('');
            
            // About
            about.textContent = company.about;
            
            // Show popup
            popup.classList.add('active');
        }

        function setupEventListeners() {
                       // Mobile navigation
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            const mobileNav = document.querySelector('.mobile-nav');
            const body = document.body;
            
            mobileMenuBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                mobileNav.classList.toggle('active');
                mobileMenuBtn.classList.toggle('active');
                body.classList.toggle('menu-open');
            });

            // Close mobile nav when clicking outside or on a link
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.mobile-nav') && !e.target.closest('.mobile-menu-btn')) {
                    mobileNav.classList.remove('active');
                    mobileMenuBtn.classList.remove('active');
                    body.classList.remove('menu-open');
                }
            });
            
            // Close menu when clicking on mobile nav links
            document.querySelectorAll('.mobile-nav-links a, .mobile-nav-links button').forEach(item => {
                item.addEventListener('click', () => {
                    mobileNav.classList.remove('active');
                    mobileMenuBtn.classList.remove('active');
                    body.classList.remove('menu-open');
                });
            });

            // Header scroll effect
            window.addEventListener('scroll', function() {
                const header = document.getElementById('header');
                const backToTop = document.getElementById('backToTop');
                
                if (window.scrollY > 100) {
                    header.classList.add('scrolled');
                    backToTop.classList.add('active');
                } else {
                    header.classList.remove('scrolled');
                    backToTop.classList.remove('active');
                }
                
                // Fade in animations
                const fadeElements = document.querySelectorAll('.fade-in');
                fadeElements.forEach(element => {
                    const elementTop = element.getBoundingClientRect().top;
                    const elementVisible = 150;
                    
                    if (elementTop < window.innerHeight - elementVisible) {
                        element.classList.add('active');
                    }
                });
            });

            // Back to top functionality
            document.getElementById('backToTop').addEventListener('click', function() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });

            // Initial fade in animations
            const fadeInOnScroll = function() {
                const fadeElements = document.querySelectorAll('.fade-in');
                fadeElements.forEach(element => {
                    const elementTop = element.getBoundingClientRect().top;
                    const elementVisible = 150;
                    
                    if (elementTop < window.innerHeight - elementVisible) {
                        element.classList.add('active');
                    }
                });
            };
            
            window.addEventListener('scroll', fadeInOnScroll);
            fadeInOnScroll();

            // Hero search functionality
            document.getElementById('heroSearchBtn').addEventListener('click', handleHeroSearch);
            
        
            // Book now buttons - CHECK LOGIN FIRST
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('book-btn')) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const companyData = JSON.parse(e.target.getAttribute('data-company').replace(/&#39;/g, "'"));
                    currentSelectedCompany = companyData;
                    
                    // Check if user is logged in
                    if (currentUser) {
                        // User is logged in - proceed to booking
                        window.location.href = 'book-ticket.html?company=' + encodeURIComponent(companyData.name);
                    } else {
                        // User not logged in - redirect to login page
                        if (confirm(currentLanguage === 'en' 
                            ? 'You need to login to book tickets. Go to login page?' 
                            : '        ?')) {
                            window.location.href = 'login.html';
                        }
                    }
                }
            });

            // Close bus detail popup
            document.getElementById('closeDetailPopup').addEventListener('click', function() {
                document.getElementById('busDetailPopup').classList.remove('active');
                currentSelectedCompany = null;
            });

            // Close popup when clicking outside
            document.getElementById('busDetailPopup').addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                    currentSelectedCompany = null;
                }
            });

            // Book ticket button in popup - CHECK LOGIN FIRST
            document.getElementById('bookTicketBtn').addEventListener('click', function() {
                if (currentSelectedCompany) {
                    // Check if user is logged in
                    if (currentUser) {
                        // User is logged in - proceed to booking
                        window.location.href = 'book-ticket.html?company=' + encodeURIComponent(currentSelectedCompany.name);
                    } else {
                        // User not logged in - redirect to login page
                        if (confirm(currentLanguage === 'en' 
                            ? 'You need to login to book tickets. Go to login page?' 
                            : '        ?')) {
                            window.location.href = 'login.html';
                        }
                    }
                }
            });

            // Language selector - both desktop and mobile
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const lang = this.getAttribute('data-lang');
                    changeLanguage(lang);
                });
            });


            // Payment method cards - visual feedback only
            document.querySelectorAll('.payment-method-card').forEach(card => {
                card.addEventListener('click', function() {
                    this.style.transform = 'translateY(-5px)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 300);
                });
            });
        }

        // Language change function
        function changeLanguage(lang) {
            currentLanguage = lang;
            
            // Update active state for all language buttons
            document.querySelectorAll('.language-btn').forEach(btn => {
                if (btn.getAttribute('data-lang') === lang) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
            
            // Update text content
            updateLanguage();
            
            // Re-populate data with new language
            populateEnhancedCarriers();
            populateEnhancedCities();
            
            // Close mobile menu if open
            document.querySelector('.mobile-nav').classList.remove('active');
            
            // Show notification
            showNotification(lang === 'en' 
                ? 'Language changed to English' 
                : '   ');
        }

        function updateLanguage() {
            // Update all elements with translation keys
            Object.keys(translations[currentLanguage]).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    element.textContent = translations[currentLanguage][key];
                }
            });
            
            // Update button texts if they exist
            const loginBtn = document.getElementById('loginBtn');
            const signupBtn = document.getElementById('signupBtn');
            const bookTicketBtn = document.getElementById('bookTicketBtn');
            const heroSearchBtn = document.getElementById('heroSearchBtn');
            
            if (loginBtn) loginBtn.textContent = translations[currentLanguage]['login-btn'];
            if (signupBtn) signupBtn.textContent = translations[currentLanguage]['signup-btn'];
            if (bookTicketBtn) bookTicketBtn.textContent = translations[currentLanguage]['book-tickets-btn'];
            if (heroSearchBtn) heroSearchBtn.innerHTML = ` ${currentLanguage === 'en' ? 'Search Buses' : ' '}`;
                        
            // Update book buttons in companies grid
            document.querySelectorAll('.book-btn').forEach(btn => {
                btn.textContent = translations[currentLanguage]['book-btn'];
            });
            
            // Update hero title and subtitle
            document.querySelector('.hero-title').textContent = translations[currentLanguage]['hero-title'];
            document.querySelector('.hero-subtitle').textContent = translations[currentLanguage]['hero-subtitle'];
        }

        // Initialize chatbot modal functionality
        function initializeChatbotModal() {
            // Open chatbot modal from floating button
            document.getElementById('floatingChatbotBtn').addEventListener('click', openChatbotModal);
            
            // Open chatbot modal from AI section button
            document.getElementById('openChatbot').addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                openChatbotModal();
            });
            
            // Close chatbot modal
            document.getElementById('closeChatbot').addEventListener('click', closeChatbotModal);
            
            // Close when clicking outside
            document.getElementById('chatbotModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeChatbotModal();
                }
            });
            
            // Send message in modal
            document.getElementById('modalSendBtn').addEventListener('click', sendModalMessage);
            
            // Enter key support
            document.getElementById('modalChatInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendModalMessage();
                }
            });
            
            // Check if chatbot should open from other pages
            if (window.location.hash === '#chatbot-open') {
                setTimeout(() => {
                    openChatbotModal();
                    
                    // Check for stored context message
                    const contextMessage = sessionStorage.getItem('chatbotMessage');
                    if (contextMessage) {
                        setTimeout(() => {
                            document.getElementById('modalChatInput').value = contextMessage;
                            sendModalMessage();
                            sessionStorage.removeItem('chatbotMessage');
                            sessionStorage.removeItem('chatbotContext');
                        }, 1000);
                    }
                }, 500);
            } else {
                // Initialize with welcome message
                loadModalWelcomeMessage();
            }
        }

        function openChatbotModal() {
            const modal = document.getElementById('chatbotModal');
            modal.classList.add('active');
            
            // Focus input
            setTimeout(() => {
                document.getElementById('modalChatInput').focus();
            }, 300);
            
            // Load or restore chat
            if (modalChatHistory.length === 0) {
                loadModalWelcomeMessage();
            }
        }

        function closeChatbotModal() {
            document.getElementById('chatbotModal').classList.remove('active');
        }

        function loadModalWelcomeMessage() {
            const chatMessages = document.getElementById('modalChatMessages');
            chatMessages.innerHTML = '';
            
            const welcomeMessage = `
                <div class="message bot-message">
                    ${currentLanguage === 'en' ? 'Hello!  I\'m SwiftBot, your AI travel assistant. How can I help you today?' : '!      AI      ?'}
                    <div style="margin-top: 10px;">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                            <i class="fas fa-route" style="color: var(--primary);"></i>
                            <span>${currentLanguage === 'en' ? 'Find bus routes and schedules' : '     '}</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                            <i class="fas fa-ticket-alt" style="color: var(--primary);"></i>
                            <span>${currentLanguage === 'en' ? 'Get booking assistance' : '  '}</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                            <i class="fas fa-percent" style="color: var(--primary);"></i>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-question-circle" style="color: var(--primary);"></i>
                            <span>${currentLanguage === 'en' ? 'Get travel information and tips' : '    '}</span>
                        </div>
                    </div>
                    <div class="message-time">${new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</div>
                    <div class="quick-replies">
                        <div class="quick-reply" data-query="routes from addis to bahirdar">${currentLanguage === 'en' ? 'Routes: Addis  Bahirdar' : ':    '}</div>
                        <div class="quick-reply" data-query="how to book">${currentLanguage === 'en' ? 'How to book a ticket' : '  '}</div>
                        <div class="quick-reply" data-query="current promotions">${currentLanguage === 'en' ? 'Current promotions' : ' '}</div>
                        <div class="quick-reply" data-query="bus companies">${currentLanguage === 'en' ? 'Available bus companies' : '  '}</div>
                    </div>
                </div>
            `;
            
            chatMessages.innerHTML = welcomeMessage;
            
            // Add event listeners to quick replies
            setTimeout(() => {
                document.querySelectorAll('#modalChatMessages .quick-reply').forEach(reply => {
                    reply.addEventListener('click', function() {
                        const query = this.getAttribute('data-query');
                        addModalMessage(query, 'user');
                        setTimeout(() => {
                            processModalInput(query);
                        }, 500);
                    });
                });
            }, 100);
            
            modalChatHistory = [{
                type: 'bot',
                message: welcomeMessage,
                time: new Date()
            }];
        }

        function sendModalMessage() {
            const input = document.getElementById('modalChatInput');
            const message = input.value.trim();
            
            if (message === '') return;
            
            addModalMessage(message, 'user');
            input.value = '';
            document.getElementById('modalSendBtn').disabled = true;
            
            setTimeout(() => {
                processModalInput(message);
                document.getElementById('modalSendBtn').disabled = false;
            }, 1000);
        }

        function addModalMessage(text, sender, isAI = false) {
            const chatMessages = document.getElementById('modalChatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message');
            messageDiv.classList.add(sender === 'user' ? 'user-message' : 'bot-message');
            
            // Format AI responses better
            if (sender === 'bot' && text) {
                // Convert markdown-like formatting to HTML
                let formattedText = text
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/\*(.*?)\*/g, '<em>$1</em>')
                    .replace(/\n/g, '<br>');
                
                messageDiv.innerHTML = formattedText;
            } else {
                messageDiv.textContent = text;
            }
            
            const timeDiv = document.createElement('div');
            timeDiv.classList.add('message-time');
            timeDiv.textContent = new Date().toLocaleTimeString([], { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            messageDiv.appendChild(timeDiv);
            
            // Add AI status indicator
            if (sender === 'bot' && isAI) {
                const statusDiv = document.createElement('div');
                statusDiv.classList.add('ai-status', isAI === 'success' ? 'success' : 'fallback');
                statusDiv.textContent = isAI === 'success' ? ' AI Response' : ' Fallback Response';
                messageDiv.appendChild(statusDiv);
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Save to history
            modalChatHistory.push({
                type: sender,
                message: text,
                time: new Date(),
                isAI: isAI
            });
            
            return messageDiv;
        }

        async function processModalInput(input) {
            const lowerInput = input.toLowerCase().trim();
            
            // Show typing indicator
            const chatMessages = document.getElementById('modalChatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'typing-indicator';
            typingDiv.innerHTML = `
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            `;
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            try {
                // Try AI API first, fallback to predefined responses
                let response = await getAIResponse(input);
                
                // Remove typing indicator and add response
                setTimeout(() => {
                    typingDiv.remove();
                    const messageDiv = addModalMessage(response, 'bot', 'success');
                    
                    // Add quick replies for certain responses
                    addModalQuickReplies(messageDiv, lowerInput);
                }, 500);
                
            } catch (error) {
                console.log('AI API failed, using fallback responses:', error);
                
                // Fallback to predefined responses
                setTimeout(() => {
                    typingDiv.remove();
                    
                    let response = getModalChatbotResponse(lowerInput);
                    const messageDiv = addModalMessage(response, 'bot', 'fallback');
                    
                    // Add quick replies for certain responses
                    addModalQuickReplies(messageDiv, lowerInput);
                }, 1000);
            }
        }

        // AI API Integration with multiple fallback services
        async function getAIResponse(userInput) {
            const swiftBusContext = `You are SwiftBot, a friendly and conversational AI assistant for SwiftBus - Ethiopia's premium bus travel service. 

You should be helpful and engaging with ALL types of questions, not just bus-related ones. For non-travel questions, provide helpful responses while gently steering the conversation toward how you can help with travel.

COMPANY INFO:
- SwiftBus connects 10 major Ethiopian cities: Addis Ababa, Kombolcha, Bahirdar, Dessie, Adama, Hawasa, Arbaminch, Gonder, Mekele, Jimma
- 4 bus companies: Selam Bus (premium), Abay Bus (northern routes), Ethio Bus (affordable), Habesha Bus (cultural)
- Payment methods: Telebirr, CBE, Bank of Abyssinia, Dashen Bank, Cash
- Support: +251 911 234 567, support@swiftbus.et

SAMPLE ROUTES & PRICES:
- Addis Ababa  Bahirdar: 10-11h, 580km, ETB 350
- Addis Ababa  Hawasa: 4-5h, 275km, ETB 220  
- Addis Ababa  Mekele: 12-13h, 780km, ETB 420
- Bahirdar  Gonder: 3-4h, 180km, ETB 180

PERSONALITY: Be friendly, conversational, and helpful. Answer general questions when possible, but always relate back to how you can help with travel. Use emojis appropriately and keep responses warm and engaging.

User question: ${userInput}

Response:`;

            // Try multiple AI services in order of preference
            const aiServices = [
                {
                    name: 'Hugging Face',
                    url: 'https://api-inference.huggingface.co/models/microsoft/DialoGPT-medium',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: {
                        inputs: swiftBusContext,
                        parameters: {
                            max_length: 200,
                            temperature: 0.7,
                            do_sample: true
                        }
                    }
                },
                {
                    name: 'Hugging Face Conversational',
                    url: 'https://api-inference.huggingface.co/models/facebook/blenderbot-400M-distill',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: {
                        inputs: {
                            past_user_inputs: [],
                            generated_responses: [],
                            text: `As SwiftBot for SwiftBus Ethiopia, help with: ${userInput}`
                        }
                    }
                },
                {
                    name: 'OpenAI Compatible',
                    url: 'https://api.openai.com/v1/chat/completions',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer demo-key' // This will fail but shows the structure
                    },
                    body: {
                        model: 'gpt-3.5-turbo',
                        messages: [
                            {
                                role: 'system',
                                content: 'You are SwiftBot, AI assistant for SwiftBus Ethiopia. Help with bus bookings, routes, and travel info.'
                            },
                            {
                                role: 'user', 
                                content: userInput
                            }
                        ],
                        max_tokens: 150,
                        temperature: 0.7
                    }
                }
            ];

            // Try each service
            for (const service of aiServices) {
                try {
                    console.log(`Trying ${service.name} API...`);
                    
                    const response = await fetch(service.url, {
                        method: 'POST',
                        headers: service.headers,
                        body: JSON.stringify(service.body)
                    });

                    if (response.ok) {
                        const data = await response.json();
                        console.log(`${service.name} response:`, data);
                        
                        let aiResponse = '';
                        
                        // Parse different response formats
                        if (service.name === 'Hugging Face' && data[0]?.generated_text) {
                            aiResponse = data[0].generated_text.replace(swiftBusContext, '').trim();
                        } else if (service.name === 'Hugging Face Conversational' && data.generated_text) {
                            aiResponse = data.generated_text;
                        } else if (service.name === 'OpenAI Compatible' && data.choices?.[0]?.message?.content) {
                            aiResponse = data.choices[0].message.content;
                        }
                        
                        // Validate and enhance response
                        if (aiResponse && aiResponse.length > 10) {
                            // Add SwiftBus branding and ensure helpful response
                            if (!aiResponse.includes('SwiftBus') && !aiResponse.includes('SwiftBot')) {
                                aiResponse = ` **SwiftBot here!** ${aiResponse}`;
                            }
                            
                            // Ensure response is relevant to bus travel
                            if (aiResponse.length < 50) {
                                aiResponse += `\n\nFor more specific help with SwiftBus routes, bookings, or travel info, just ask! `;
                            }
                            
                            return aiResponse;
                        }
                    }
                } catch (error) {
                    console.log(`${service.name} failed:`, error);
                    continue;
                }
            }
            
            // If all AI services fail, throw error to use fallback
            throw new Error('All AI services unavailable');
        }

        // IMPROVED Chatbot Responses with more comprehensive answers
        function getModalChatbotResponse(input) {
            const lowerInput = input.toLowerCase();
            
            // Greetings
            if (lowerInput.match(/\b(hello|hi|hey|hola|selam|good morning|good afternoon|good evening)\b/)) {
                if (currentLanguage === 'en') {
                    const greetings = [
                        "Hello!  I'm SwiftBot, your AI travel assistant. How can I help you today?",
                        "Hi there! Welcome to SwiftBus. I'm here to help you with all your travel needs across Ethiopia.",
                        "Greetings! I'm SwiftBot, ready to assist you with bus bookings, routes, and travel information."
                    ];
                    return greetings[Math.floor(Math.random() * greetings.length)];
                } else {
                    const greetings = [
                        "!      AI      ?",
                        "!              ",
                        "!              "
                    ];
                    return greetings[Math.floor(Math.random() * greetings.length)];
                }
            }
            
            // General conversation responses
            if (lowerInput.match(/\b(how are you|how do you do|what's up|wassup)\b/)) {
                return currentLanguage === 'en' 
                    ? "I'm doing great, thank you for asking!  I'm here and ready to help you with your travel plans. What can I assist you with today?"
                    : "    !             ?";
            }
            
            // Name questions
            if (lowerInput.match(/\b(what.*your name|who are you|what are you)\b/)) {
                return currentLanguage === 'en'
                    ? "I'm SwiftBot!  I'm an AI assistant created to help you with SwiftBus services. I can help you find routes, book tickets, and answer questions about bus travel in Ethiopia. What would you like to know?"
                    : "  !       AI                   ?";
            }
            
            // Weather questions
            if (lowerInput.match(/\b(weather|temperature|rain|sunny|cloudy)\b/)) {
                return currentLanguage === 'en'
                    ? "I don't have access to current weather information, but I can help you plan your bus travel!  Different Ethiopian cities have varying climates - would you like information about the best travel times or what to pack for your destination?"
                    : "          !         -           ?";
            }
            
            // Time questions
            if (lowerInput.match(/\b(time|clock|what time)\b/)) {
                const currentTime = new Date().toLocaleTimeString();
                return currentLanguage === 'en'
                    ? `The current time is ${currentTime}.  If you're planning to travel, I can help you find bus schedules and departure times for your route!`
                    : `  ${currentTime}              !`;
            }
            
            // Jokes or fun questions
            if (lowerInput.match(/\b(joke|funny|laugh|humor)\b/)) {
                return currentLanguage === 'en'
                    ? "Here's a travel joke for you: Why don't buses ever get lost? Because they always follow their route!  Speaking of routes, would you like to explore our bus routes across Ethiopia?"
                    : "      ?   !           ?";
            }
            
            // Math or calculation questions
            if (lowerInput.match(/\b(calculate|math|plus|minus|multiply|divide|\d+.*\+.*\d+|\d+.*-.*\d+)\b/)) {
                return currentLanguage === 'en'
                    ? "I'm not a calculator, but I can help you calculate travel costs!  For example, I can tell you ticket prices, estimate total trip costs, or help you budget for your journey. What travel calculations do you need?"
                    : "        !                   ?";
            }
            
            // General knowledge questions
            if (lowerInput.match(/\b(what is|tell me about|explain|define)\b/) && !lowerInput.match(/\b(bus|route|ticket|travel|swiftbus)\b/)) {
                return currentLanguage === 'en'
                    ? "I'm specialized in helping with SwiftBus travel services!  While I might not have all the answers to general questions, I'm an expert on Ethiopian bus travel. Is there anything about transportation, routes, or travel planning I can help you with?"
                    : "      !                        ?";
            }
            
            // Route queries
            if (input.includes('route') || input.includes('from') || input.includes('to')) {
                if (input.includes('addis') && input.includes('bahirdar')) {
                    return currentLanguage === 'en' 
                        ? " **Route: Addis Ababa  Bahirdar**\n Duration: 10-11 hours\n Distance: 580km\n Price: ETB 350\n Available companies: Selam Bus, Abay Bus, Habesha Bus\n Buses depart daily at 6:00 AM, 8:00 AM, and 7:00 PM"
                        : " **:     **\n : 10-11 \n : 580\n : 350 \n  :      \n    600 800   700 ";
                }
                if (input.includes('addis') && input.includes('hawasa')) {
                    return currentLanguage === 'en'
                        ? " **Route: Addis Ababa  Hawasa**\n Duration: 4-5 hours\n Distance: 275km\n Price: ETB 220\n Available companies: Selam Bus, Ethio Bus\n Buses depart every 2 hours from 5:00 AM to 7:00 PM"
                        : " **:    **\n : 4-5 \n : 275\n : 220 \n  :    \n  2   500   700  ";
                }
                if (input.includes('addis') && input.includes('mekele')) {
                    return currentLanguage === 'en'
                        ? " **Route: Addis Ababa  Mekele**\n Duration: 12-13 hours\n Distance: 780km\n Price: ETB 420\n Available companies: Selam Bus, Habesha Bus\n Night buses depart daily at 8:00 PM, arrive 8:00 AM"
                        : " **:    **\n : 12-13 \n : 780\n : 420 \n  :    \n     800   800 ";
                }
                
                return currentLanguage === 'en'
                    ? "I can help you find routes between our 10 Ethiopian cities:\n\n**Popular Routes:**\n Addis Ababa  Bahirdar (10-11h)\n Addis Ababa  Hawasa (4-5h)\n Addis Ababa  Mekele (12-13h)\n Bahirdar  Gonder (3-4h)\n Adama  Hawasa (3-4h)\n\nWhich specific route are you interested in?"
                    : "10       \n\n** :**\n      (10-11)\n     (4-5)\n     (12-13)\n     (3-4)\n    (3-4)\n\n     ?";
            }
            
            // Booking queries
            if (input.includes('book') || input.includes('ticket') || input.includes('reserve')) {
                return currentLanguage === 'en'
                    ? " **How to Book a Ticket:**\n1. Select your departure and destination cities\n2. Choose your travel date\n3. Select from available bus companies\n4. Choose your seat preference\n5. Enter passenger details\n6. Make payment via Telebirr, CBE, or other banks\n7. Receive e-ticket via email/SMS\n\n**Tip:** Book at least 3 days in advance for better seat selection!"
                    : " **  :**\n1.     \n2.   \n3.    \n4.   \n5.   \n6.        \n7. - / \n\n**:**     3   !";
            }
            
            // Bus company queries
            if (input.includes('company') || input.includes('bus') || input.includes('carrier')) {
                return currentLanguage === 'en'
                    ? " **Available Bus Companies:**\n\n1. **Selam Bus** (4.8) - Premium service with WiFi, AC, meals\n2. **Abay Bus** (4.5) - Reliable northern routes, comfortable seats\n3. **Ethio Bus** (4.2) - Affordable daily travel, frequent departures\n4. **Habesha Bus** (4.4) - Cultural experience, traditional snacks\n\nEach company has different amenities and route coverage. Click on any company card for more details!"
                    : " **  :**\n\n1. ** ** (4.8) -      \n2. ** ** (4.5) -     \n3. ** ** (4.2) -     \n4. ** ** (4.4) -    \n\n             !";
            }
            
            // Payment queries
            if (input.includes('payment') || input.includes('pay') || input.includes('telebirr')) {
                return currentLanguage === 'en'
                    ? " **Payment Methods:**\n\n1. **Telebirr** - Fast mobile payments\n2. **Commercial Bank of Ethiopia (CBE)** - Bank transfer/online\n3. **Bank of Abyssinia** - Secure online gateway\n4. **Dashen Bank** - Mobile/internet banking\n5. **Cash** - At authorized SwiftBus agents\n\nAll payments are secure and encrypted. You'll receive payment confirmation immediately."
                    : " ** :**\n\n1. **** -   \n2. **    ()** -  /\n3. **  ** -      \n4. ** ** - / \n5. **** -     \n\n          ";
            }
            
            // Help queries
            if (input.includes('help') || input.includes('support') || input.includes('contact')) {
                return currentLanguage === 'en'
                    ? " **Need Help?**\n\n **Call:** +251 911 234 567 (24/7)\n **Email:** support@swiftbus.et\n **Live Chat:** Available on website\n **Office:** Addis Ababa, Ethiopia\n **Hours:** Monday-Sunday, 6:00 AM - 10:00 PM\n\nFor urgent issues, call our 24/7 hotline. For booking modifications, have your ticket number ready."
                    : " ** ?**\n\n **:** +251 911 234 567 (24/7)\n **:** support@swiftbus.et\n ** :**    \n **:**   \n : -  600 -  1000\n\n  24/7        ";
            }
            
            // Thank you responses
            if (input.match(/\b(thank|thanks|appreciate|grateful)\b/)) {
                return currentLanguage === 'en'
                    ? "You're welcome!  I'm always here to help with your travel needs. Safe travels and enjoy your journey across Ethiopia! "
                    : "  !                ! ";
            }
            
            // Default response with comprehensive information - now more conversational
            // Check if it's a question
            if (lowerInput.includes('?') || lowerInput.match(/\b(what|how|when|where|why|who|can|could|would|should|is|are|do|does)\b/)) {
                if (currentLanguage === 'en') {
                    return "That's an interesting question!  While I'm primarily designed to help with SwiftBus travel services, I'm always happy to chat. I'm most knowledgeable about:\n\n **Bus Travel** - Routes, schedules, bookings\n **Ethiopian Cities** - Travel information and connections\n **Payments & Support** - How to book and get help\n\nIs there anything travel-related I can help you with, or would you like to know more about SwiftBus services?";
                } else {
                    return "   !                \n\n ** ** -    \n ** ** -    \n **  ** -     \n\n             ?";
                }
            }
            
            // For statements or general conversation
            if (currentLanguage === 'en') {
                const responses = [
                    "I hear you!  I'm SwiftBot, and I love helping people with their travel needs. Here's what I can assist with:\n\n **Booking Tickets** - Find and book bus tickets\n **Route Information** - Schedules, durations, prices\n **Bus Companies** - Compare amenities and ratings\n **Promotions** - Current discounts and offers\n **Payment Options** - Secure payment methods\n **Support** - Contact information and help\n\nWhat would you like to explore?",
                    "Thanks for chatting with me!  I'm your AI travel companion for Ethiopian bus journeys. I can provide:\n\n Real-time schedule information\n Step-by-step booking guidance\n Company ratings and reviews\n City information and attractions\n Estimated travel times\n Seat selection advice\n\nHow can I make your day better?",
                    "Hello there!  I'm here to help make your travel planning easier. Whether you're looking for:\n\n Routes between 10 major Ethiopian cities\n Information about our 4 reliable bus companies\n Current promotions and discounts\n Secure payment methods including Telebirr\n Booking procedures and requirements\n Travel tips and recommendations\n\nJust let me know what interests you!"
                ];
                return responses[Math.floor(Math.random() * responses.length)];
            } else {
                const responses = [
                    "!             \n\n ** ** -     \n ** ** -    \n ** ** -    \n **** -    \n ** ** -    \n **** -    \n\n  ?",
                    "   !    AI         \n\n    \n    \n    \n    \n   \n   \n\n    ?",
                    "!        \n\n 10     \n  4    \n    \n      \n    \n    \n\n  !"
                ];
                return responses[Math.floor(Math.random() * responses.length)];
            }
        }

        function addModalQuickReplies(messageDiv, input) {
            const lowerInput = input.toLowerCase();
            let quickReplies = [];
            
            if (lowerInput.includes('route') || lowerInput.includes('from') || lowerInput.includes('to')) {
                quickReplies = currentLanguage === 'en' ? [
                    { text: "Addis  Hawasa", query: "routes from addis to hawasa" },
                    { text: "Addis  Mekele", query: "routes from addis to mekele" },
                    { text: "Bahirdar  Gonder", query: "routes from bahirdar to gonder" },
                    { text: "All routes", query: "show all routes" }
                ] : [
                    { text: "  ", query: "routes from addis to hawasa" },
                    { text: "  ", query: "routes from addis to mekele" },
                    { text: "   ", query: "routes from bahirdar to gonder" },
                    { text: " ", query: "show all routes" }
                ];
            } else if (lowerInput.includes('book') || lowerInput.includes('ticket')) {
                quickReplies = currentLanguage === 'en' ? [
                    { text: "Booking steps", query: "how to book step by step" },
                    { text: "Required documents", query: "documents needed for booking" },
                    { text: "Cancellation policy", query: "cancellation and refund policy" },
                    { text: "Seat selection", query: "how to choose seats" }
                ] : [
                    { text: " ", query: "how to book step by step" },
                    { text: " ", query: "documents needed for booking" },
                    { text: " ", query: "cancellation and refund policy" },
                    { text: " ", query: "how to choose seats" }
                ];
            } else {
                quickReplies = currentLanguage === 'en' ? [
                    { text: "Find routes", query: "bus routes" },
                    { text: "How to book", query: "booking help" },
                    { text: "Contact support", query: "help and support" }
                ] : [
                    { text: " ", query: "bus routes" },
                    { text: " ", query: "booking help" },
                    { text: " ", query: "help and support" }
                ];
            }
            
            if (quickReplies.length > 0) {
                const repliesDiv = document.createElement('div');
                repliesDiv.className = 'quick-replies';
                
                quickReplies.forEach(reply => {
                    const replyBtn = document.createElement('div');
                    replyBtn.className = 'quick-reply';
                    replyBtn.textContent = reply.text;
                    replyBtn.setAttribute('data-query', reply.query);
                    replyBtn.addEventListener('click', function() {
                        const query = this.getAttribute('data-query');
                        addModalMessage(query, 'user');
                        setTimeout(() => {
                            processModalInput(query);
                        }, 500);
                    });
                    repliesDiv.appendChild(replyBtn);
                });
                
                messageDiv.appendChild(repliesDiv);
            }
        }

        // Show notification
        function showNotification(message) {
            // Create notification element
            const notification = document.createElement('div');
            notification.style.position = 'fixed';
            notification.style.bottom = '20px';
            notification.style.right = '20px';
            notification.style.background = 'var(--primary)';
            notification.style.color = 'white';
            notification.style.padding = '15px 20px';
            notification.style.borderRadius = '8px';
            notification.style.boxShadow = '0 5px 15px rgba(0,0,0,0.2)';
            notification.style.zIndex = '1000';
            notification.style.transition = 'all 0.3s ease';
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Remove notification after 3 seconds
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        function handleHeroSearch() {
            const originSelect = document.getElementById('originSelect');
            const destinationSelect = document.getElementById('destinationSelect');
            const travelDate = document.getElementById('travelDate');
            
            const origin = originSelect.value;
            const destination = destinationSelect.value;
            const date = travelDate.value;

            // Validation
            if (!origin || !destination) {
                alert(currentLanguage === 'en' 
                    ? 'Please select both departure and destination cities' 
                    : '     ');
                return;
            }

            if (origin === destination) {
                alert(currentLanguage === 'en'
                    ? 'Departure and destination cannot be the same city'
                    : '      ');
                return;
            }

            // Save search data and redirect to search page
            const searchData =  {
                from: origin,
                to: destination,
                date: date,
                passengers: 1
            };
            
            localStorage.setItem('swiftbus_search_data', JSON.stringify(searchData));
            window.location.href = 'search.html';
        }

    </script>

    <script src="js/api.js"></script>
    <script>
        // API Integration for this page
        document.addEventListener('DOMContentLoaded', async function() {
            // Check user session (optional)
            const user = await authManager.checkAuth();
            updateUIForUser(user);

            // Load popular routes
            try {
                const routes = await swiftBusAPI.getPopularRoutes();
                displayPopularRoutes(routes.data);
            } catch (error) {
                console.error('Failed to load popular routes:', error);
            }

            // Load cities for dropdowns
            try {
                const cities = await swiftBusAPI.getCities();
                populateCityDropdowns(cities.data);
            } catch (error) {
                console.error('Failed to load cities:', error);
            }
        });

        // Helper functions for this page
        function updateUIForUser(user) {
            if (user) {
                // Update UI for logged-in user
                const userElements = document.querySelectorAll('.user-name');
                userElements.forEach(el => el.textContent = user.name);
                
                const loginBtns = document.querySelectorAll('.login-btn');
                loginBtns.forEach(btn => btn.style.display = 'none');
                
                const userMenus = document.querySelectorAll('.user-menu');
                userMenus.forEach(menu => menu.style.display = 'block');
            }
        }

        // Placeholder functions - implement as needed
        function displayPopularRoutes(routes) {
            console.log('Popular routes:', routes);
            // Implement route display logic
        }

        function populateCityDropdowns(cities) {
            console.log('Cities:', cities);
            // Implement city dropdown population
        }

        function displayUserBookings(bookings) {
            console.log('User bookings:', bookings);
            // Implement booking display logic
        }

        function displayBookingStats(stats) {
            console.log('Booking stats:', stats);
            // Implement stats display logic
        }

        function displayAdminStats(stats) {
            console.log('Admin stats:', stats);
            // Implement admin stats display logic
        }

        function displayAllBookings(bookings) {
            console.log('All bookings:', bookings);
            // Implement all bookings display logic
        }

        function displayBuses(buses) {
            console.log('Buses:', buses);
            // Implement buses display logic
        }

        function displaySchedules(schedules) {
            console.log('Schedules:', schedules);
            // Implement schedules display logic
        }
        
        // All functions complete
    </script>
</body>
</html>